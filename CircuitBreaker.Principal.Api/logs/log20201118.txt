2020-11-18 17:00:04.641 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 17:00:06.487 -03:00 [DBG] Hosting starting
2020-11-18 17:00:06.557 -03:00 [INF] Hosting enviroment = Development
2020-11-18 17:00:06.736 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 17:00:06.820 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 17:00:06.874 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 17:00:06.876 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 17:00:06.878 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 17:00:06.881 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 17:00:06.882 -03:00 [INF] Hosting environment: Development
2020-11-18 17:00:06.883 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 17:00:06.885 -03:00 [DBG] Hosting started
2020-11-18 17:00:17.476 -03:00 [DBG] Connection id "0HM4BVI943A9M" accepted.
2020-11-18 17:00:17.481 -03:00 [DBG] Connection id "0HM4BVI943A9M" started.
2020-11-18 17:00:17.620 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 17:00:17.627 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 17:00:17.672 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 17:00:17.679 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 17:00:17.685 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:00:17.689 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:00:17.704 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 17:00:17.797 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 17:00:17.806 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 17:00:17.813 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 17:00:17.818 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 17:00:17.831 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 17:00:17.847 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 17:00:17.855 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 17:00:17.868 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 17:00:19.889 -03:00 [WRN] Log Warning GetPrincipal
2020-11-18 17:00:19.927 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 17:00:19.943 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 17:00:19.945 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 17:00:19.954 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 17:00:19.957 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 17:00:19.961 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 17:00:19.997 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2133.1657ms
2020-11-18 17:00:20.037 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:00:20.053 -03:00 [INF] Request finished in 2435.7676ms 200 application/json; charset=utf-8
2020-11-18 17:01:25.323 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 17:01:26.558 -03:00 [DBG] Hosting starting
2020-11-18 17:01:26.636 -03:00 [INF] Hosting enviroment = Development
2020-11-18 17:01:26.836 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 17:01:27.005 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 17:01:27.171 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 17:01:27.177 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 17:01:27.178 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 17:01:27.180 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 17:01:27.181 -03:00 [INF] Hosting environment: Development
2020-11-18 17:01:27.182 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 17:01:27.184 -03:00 [DBG] Hosting started
2020-11-18 17:01:28.643 -03:00 [INF] Application is shutting down...
2020-11-18 17:01:28.644 -03:00 [DBG] Hosting stopping
2020-11-18 17:01:28.663 -03:00 [DBG] Hosting stopped
2020-11-18 17:01:41.332 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 17:01:42.537 -03:00 [DBG] Hosting starting
2020-11-18 17:01:42.659 -03:00 [INF] Hosting enviroment = Development
2020-11-18 17:01:42.978 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 17:01:43.062 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 17:01:43.134 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 17:01:43.138 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 17:01:43.140 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 17:01:43.143 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 17:01:43.144 -03:00 [INF] Hosting environment: Development
2020-11-18 17:01:43.146 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 17:01:43.148 -03:00 [DBG] Hosting started
2020-11-18 17:01:45.577 -03:00 [DBG] Connection id "0HM4BVJ3C9KAH" accepted.
2020-11-18 17:01:45.581 -03:00 [DBG] Connection id "0HM4BVJ3C9KAH" started.
2020-11-18 17:01:45.727 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 17:01:45.742 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 17:01:45.791 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 17:01:45.801 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 17:01:45.805 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:01:45.810 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:01:45.829 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 17:01:45.945 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 17:01:45.954 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 17:01:45.960 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 17:01:45.963 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 17:01:45.968 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 17:01:45.971 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 17:01:45.979 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 17:01:45.982 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 17:01:48.007 -03:00 [WRN] Log Warning GetPrincipal
2020-11-18 17:01:48.015 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 17:01:48.026 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 17:01:48.028 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 17:01:48.031 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 17:01:48.034 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 17:01:48.040 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 17:01:48.067 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2080.9732ms
2020-11-18 17:01:48.087 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:01:48.120 -03:00 [INF] Request finished in 2396.0621ms 200 application/json; charset=utf-8
2020-11-18 17:03:04.505 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 17:03:05.412 -03:00 [DBG] Hosting starting
2020-11-18 17:03:05.489 -03:00 [INF] Hosting enviroment = Development
2020-11-18 17:03:05.700 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 17:03:06.180 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 17:03:06.239 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 17:03:06.254 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 17:03:06.255 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 17:03:06.257 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 17:03:06.258 -03:00 [INF] Hosting environment: Development
2020-11-18 17:03:06.260 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 17:03:06.262 -03:00 [DBG] Hosting started
2020-11-18 17:03:08.258 -03:00 [DBG] Connection id "0HM4BVJS0PPP6" accepted.
2020-11-18 17:03:08.262 -03:00 [DBG] Connection id "0HM4BVJS0PPP6" started.
2020-11-18 17:03:08.407 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 17:03:08.431 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 17:03:08.486 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 17:03:08.494 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 17:03:08.500 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:03:08.507 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:03:08.524 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 17:03:08.611 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 17:03:08.618 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 17:03:08.621 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 17:03:08.623 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 17:03:08.627 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 17:03:08.631 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 17:03:08.639 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 17:03:08.643 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 17:03:10.662 -03:00 [WRN] Log Warning GetPrincipal
2020-11-18 17:03:10.671 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 17:03:10.679 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 17:03:10.681 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 17:03:10.683 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 17:03:10.686 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 17:03:10.689 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 17:03:10.712 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2066.311ms
2020-11-18 17:03:10.733 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:03:10.749 -03:00 [INF] Request finished in 2345.6428ms 200 application/json; charset=utf-8
2020-11-18 17:04:34.982 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 17:04:36.164 -03:00 [DBG] Hosting starting
2020-11-18 17:04:36.352 -03:00 [INF] Hosting enviroment = Development
2020-11-18 17:04:36.741 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 17:04:36.829 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 17:04:36.885 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 17:04:36.887 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 17:04:36.889 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 17:04:36.892 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 17:04:36.893 -03:00 [INF] Hosting environment: Development
2020-11-18 17:04:36.894 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 17:04:36.896 -03:00 [DBG] Hosting started
2020-11-18 17:04:40.749 -03:00 [DBG] Connection id "0HM4BVKNIRJF3" accepted.
2020-11-18 17:04:40.753 -03:00 [DBG] Connection id "0HM4BVKNIRJF3" started.
2020-11-18 17:04:40.913 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 17:04:40.923 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 17:04:40.959 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 17:04:40.966 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 17:04:40.970 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:04:40.977 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:04:40.992 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 17:04:41.115 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 17:04:41.121 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 17:04:41.123 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 17:04:41.126 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 17:04:41.132 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 17:04:41.134 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 17:04:41.139 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 17:04:41.142 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 17:04:43.160 -03:00 [WRN] Log Warning GetPrincipal
2020-11-18 17:04:43.172 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 17:04:43.184 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 17:04:43.188 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 17:04:43.194 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 17:04:43.197 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 17:04:43.209 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 17:04:43.232 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2087.9409ms
2020-11-18 17:04:43.254 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 17:04:43.266 -03:00 [INF] Request finished in 2356.298ms 200 application/json; charset=utf-8
2020-11-18 18:25:20.621 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:25:22.102 -03:00 [DBG] Hosting starting
2020-11-18 18:25:22.167 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:25:22.411 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:25:22.532 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:25:22.583 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:25:22.589 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:25:22.593 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:25:22.595 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:25:22.596 -03:00 [INF] Hosting environment: Development
2020-11-18 18:25:22.597 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:25:22.599 -03:00 [DBG] Hosting started
2020-11-18 18:27:35.300 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:27:36.553 -03:00 [DBG] Hosting starting
2020-11-18 18:27:36.628 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:27:36.922 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:27:37.140 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:27:37.190 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:27:37.196 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:27:37.198 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:27:37.201 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:27:37.203 -03:00 [INF] Hosting environment: Development
2020-11-18 18:27:37.204 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:27:37.206 -03:00 [DBG] Hosting started
2020-11-18 18:27:48.707 -03:00 [DBG] Connection id "0HM4C1363NL3S" accepted.
2020-11-18 18:27:48.710 -03:00 [DBG] Connection id "0HM4C1363NL3S" started.
2020-11-18 18:27:48.855 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:27:48.866 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 18:27:48.905 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:27:48.911 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:27:48.915 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:27:48.921 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:27:48.937 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 18:27:49.029 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal(CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory) on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:27:49.036 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:27:49.039 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:27:49.041 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:27:49.045 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:27:49.053 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:27:49.057 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:27:49.062 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:27:49.087 -03:00 [DBG] Attempting to bind parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory' ...
2020-11-18 18:27:49.106 -03:00 [DBG] Done attempting to bind parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory'.
2020-11-18 18:27:49.111 -03:00 [DBG] Attempting to validate the bound parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory' ...
2020-11-18 18:27:49.116 -03:00 [DBG] Done attempting to validate the bound parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory'.
2020-11-18 18:27:52.283 -03:00 [INF] Log GetPrincipal
2020-11-18 18:27:55.268 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:27:55.274 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:27:59.744 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 10682.2633ms
2020-11-18 18:27:59.752 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:27:59.757 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 21
   at CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal(IPaymentHttpFactory paymentHttpFactory) in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\Controllers\PrincipalController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-18 18:28:00.041 -03:00 [INF] Request finished in 11189.6474ms 500 text/html; charset=utf-8
2020-11-18 18:30:07.082 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:30:07.996 -03:00 [DBG] Hosting starting
2020-11-18 18:30:08.056 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:30:08.255 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:30:08.350 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:30:08.403 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:30:08.417 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:30:08.418 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:30:08.420 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:30:08.421 -03:00 [INF] Hosting environment: Development
2020-11-18 18:30:08.422 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:30:08.424 -03:00 [DBG] Hosting started
2020-11-18 18:30:12.931 -03:00 [DBG] Connection id "0HM4C14H35G24" accepted.
2020-11-18 18:30:12.935 -03:00 [DBG] Connection id "0HM4C14H35G24" started.
2020-11-18 18:30:13.076 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:30:13.085 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 18:30:13.123 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:30:13.130 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:30:13.134 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:30:13.139 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:30:13.153 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 18:30:13.250 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal(CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory) on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:30:13.257 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:30:13.261 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:30:13.264 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:30:13.269 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:30:13.271 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:30:13.280 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:30:13.283 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:30:13.301 -03:00 [DBG] Attempting to bind parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory' ...
2020-11-18 18:30:13.318 -03:00 [DBG] Done attempting to bind parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory'.
2020-11-18 18:30:13.323 -03:00 [DBG] Attempting to validate the bound parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory' ...
2020-11-18 18:30:13.329 -03:00 [DBG] Done attempting to validate the bound parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory'.
2020-11-18 18:30:16.224 -03:00 [INF] Log GetPrincipal
2020-11-18 18:30:18.978 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:30:18.983 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:30:25.437 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 27
2020-11-18 18:30:25.590 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:30:25.597 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:30:25.601 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:30:25.603 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:30:25.607 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:30:25.610 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:30:25.630 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 12345.8081ms
2020-11-18 18:30:25.645 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:30:25.674 -03:00 [INF] Request finished in 12600.4631ms 200 application/json; charset=utf-8
2020-11-18 18:31:02.057 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:31:02.064 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:31:02.067 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:31:02.070 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:31:02.073 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:31:02.076 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal(CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory) on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:31:02.083 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:31:02.085 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:31:02.088 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:31:02.095 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:31:02.097 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:31:02.100 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:31:02.103 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:31:02.107 -03:00 [DBG] Attempting to bind parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory' ...
2020-11-18 18:31:02.112 -03:00 [DBG] Done attempting to bind parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory'.
2020-11-18 18:31:02.116 -03:00 [DBG] Attempting to validate the bound parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory' ...
2020-11-18 18:31:02.120 -03:00 [DBG] Done attempting to validate the bound parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory'.
2020-11-18 18:31:04.707 -03:00 [INF] Log GetPrincipal
2020-11-18 18:31:06.294 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:31:06.299 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:31:06.600 -03:00 [INF] Received HTTP response after 295.5551ms - "OK"
2020-11-18 18:31:06.604 -03:00 [INF] End processing HTTP request after 309.8766ms - "OK"
2020-11-18 18:31:11.460 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:31:11.467 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:31:11.469 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:31:11.471 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:31:11.473 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:31:11.478 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:31:11.482 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 9381.3585ms
2020-11-18 18:31:11.485 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:31:11.502 -03:00 [INF] Request finished in 9444.2276ms 200 application/json; charset=utf-8
2020-11-18 18:36:09.815 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:36:10.724 -03:00 [DBG] Hosting starting
2020-11-18 18:36:10.790 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:36:11.119 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:36:11.202 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:36:11.250 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:36:11.258 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:36:11.259 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:36:11.261 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:36:11.262 -03:00 [INF] Hosting environment: Development
2020-11-18 18:36:11.263 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:36:11.265 -03:00 [DBG] Hosting started
2020-11-18 18:36:14.001 -03:00 [DBG] Connection id "0HM4C17SMJ4AC" accepted.
2020-11-18 18:36:14.004 -03:00 [DBG] Connection id "0HM4C17SMJ4AC" started.
2020-11-18 18:36:14.139 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:36:14.150 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 18:36:14.190 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:36:14.199 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:36:14.203 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:36:14.207 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:36:14.223 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 18:36:14.307 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal(CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory) on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:36:14.316 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:36:14.318 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:36:14.323 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:36:14.327 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:36:14.330 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:36:14.333 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:36:14.337 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:36:14.363 -03:00 [DBG] Attempting to bind parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory' ...
2020-11-18 18:36:14.384 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 47.1112ms
2020-11-18 18:36:14.391 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:36:14.395 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A suitable constructor for type 'CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory' could not be located. Ensure the type is concrete and services are registered for all parameters of a public constructor.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& parameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.<>c.<.cctor>b__7_0()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at System.Threading.LazyInitializer.EnsureInitialized[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.<>c__DisplayClass12_0`2.<AddTypedClientCore>b__0(IServiceProvider s)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-18 18:36:14.511 -03:00 [INF] Request finished in 375.154ms 500 text/html; charset=utf-8
2020-11-18 18:36:16.623 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:36:16.628 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:36:16.631 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:36:16.637 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:36:16.641 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:36:16.644 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal(CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory) on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:36:16.651 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:36:16.654 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:36:16.657 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:36:16.662 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:36:16.668 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:36:16.671 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:36:16.675 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:36:16.678 -03:00 [DBG] Attempting to bind parameter 'paymentHttpFactory' of type 'CircuitBreaker.Principal.Api.HttpFactories.Interfaces.IPaymentHttpFactory' ...
2020-11-18 18:36:16.684 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 12.9923ms
2020-11-18 18:36:16.687 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:36:16.690 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A suitable constructor for type 'CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory' could not be located. Ensure the type is concrete and services are registered for all parameters of a public constructor.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& parameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.<>c.<.cctor>b__7_0()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at System.Threading.LazyInitializer.EnsureInitialized[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.<>c__DisplayClass12_0`2.<AddTypedClientCore>b__0(IServiceProvider s)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-18 18:36:16.724 -03:00 [INF] Request finished in 100.4278ms 500 text/html; charset=utf-8
2020-11-18 18:38:04.807 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:38:05.732 -03:00 [DBG] Hosting starting
2020-11-18 18:38:05.781 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:38:05.948 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:38:06.031 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:38:06.081 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:38:06.083 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:38:06.085 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:38:06.088 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:38:06.089 -03:00 [INF] Hosting environment: Development
2020-11-18 18:38:06.090 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:38:06.092 -03:00 [DBG] Hosting started
2020-11-18 18:38:08.691 -03:00 [DBG] Connection id "0HM4C18USBTH6" accepted.
2020-11-18 18:38:08.696 -03:00 [DBG] Connection id "0HM4C18USBTH6" started.
2020-11-18 18:38:08.837 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:38:08.846 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 18:38:08.881 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:38:08.888 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:38:08.898 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:08.902 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:08.917 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 18:38:08.991 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:38:08.999 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:38:09.001 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:38:09.004 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:38:09.017 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:38:09.019 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:38:09.026 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:38:09.045 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 14.6465ms
2020-11-18 18:38:09.050 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:09.056 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A suitable constructor for type 'CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory' could not be located. Ensure the type is concrete and services are registered for all parameters of a public constructor.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& parameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.<>c.<.cctor>b__7_0()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at System.Threading.LazyInitializer.EnsureInitialized[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.<>c__DisplayClass12_0`2.<AddTypedClientCore>b__0(IServiceProvider s)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-11-18 18:38:09.187 -03:00 [INF] Request finished in 353.2ms 500 text/html; charset=utf-8
2020-11-18 18:38:33.730 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:38:34.615 -03:00 [DBG] Hosting starting
2020-11-18 18:38:34.697 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:38:34.893 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:38:35.021 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:38:35.089 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:38:35.090 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:38:35.092 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:38:35.104 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:38:35.108 -03:00 [INF] Hosting environment: Development
2020-11-18 18:38:35.110 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:38:35.112 -03:00 [DBG] Hosting started
2020-11-18 18:38:36.563 -03:00 [DBG] Connection id "0HM4C19765JPT" accepted.
2020-11-18 18:38:36.567 -03:00 [DBG] Connection id "0HM4C19765JPT" started.
2020-11-18 18:38:36.703 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:38:36.713 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 18:38:36.751 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:38:36.759 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:38:36.764 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:36.770 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:36.789 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 18:38:36.869 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:38:36.875 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:38:36.879 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:38:36.881 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:38:36.885 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:38:36.888 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:38:36.892 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:38:36.907 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:38:37.926 -03:00 [INF] Log GetPrincipal
2020-11-18 18:38:37.936 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:38:37.939 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:38:42.200 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 18:38:42.349 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:38:42.357 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:38:42.359 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:38:42.362 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:38:42.365 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:38:42.368 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:38:42.392 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5495.9485ms
2020-11-18 18:38:42.415 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:42.449 -03:00 [INF] Request finished in 5747.322ms 200 application/json; charset=utf-8
2020-11-18 18:38:43.936 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:38:43.941 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:38:43.945 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:38:43.949 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:43.951 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:43.954 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:38:43.962 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:38:43.965 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:38:43.967 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:38:43.971 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:38:43.976 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:38:43.979 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:38:43.982 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:38:45.006 -03:00 [INF] Log GetPrincipal
2020-11-18 18:38:45.011 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:38:45.014 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:38:49.181 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 18:38:49.200 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:38:49.204 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:38:49.206 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:38:49.208 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:38:49.212 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:38:49.215 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:38:49.218 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5239.496ms
2020-11-18 18:38:49.222 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:38:49.234 -03:00 [INF] Request finished in 5297.4829ms 200 application/json; charset=utf-8
2020-11-18 18:39:39.500 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:39:39.503 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:39:39.507 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:39:39.515 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:39.518 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:39.520 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:39:39.527 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:39:39.530 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:39:39.533 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:39:39.538 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:39:39.542 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:39:39.546 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:39:39.550 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:39:40.556 -03:00 [INF] Log GetPrincipal
2020-11-18 18:39:40.559 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:39:40.565 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:39:40.943 -03:00 [INF] Received HTTP response after 374.1108ms - "BadRequest"
2020-11-18 18:39:40.947 -03:00 [INF] End processing HTTP request after 387.9735ms - "BadRequest"
2020-11-18 18:39:40.953 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:39:40.958 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:39:40.960 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:39:40.962 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:39:40.968 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:39:40.971 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:39:40.975 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 1428.5903ms
2020-11-18 18:39:40.982 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:40.987 -03:00 [INF] Request finished in 1487.5771ms 200 application/json; charset=utf-8
2020-11-18 18:39:43.123 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:39:43.127 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:39:43.132 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:39:43.137 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:43.142 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:43.146 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:39:43.151 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:39:43.156 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:39:43.159 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:39:43.163 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:39:43.166 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:39:43.169 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:39:43.174 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:39:44.193 -03:00 [INF] Log GetPrincipal
2020-11-18 18:39:44.197 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:39:44.200 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:39:44.223 -03:00 [INF] Received HTTP response after 23.4623ms - "OK"
2020-11-18 18:39:44.227 -03:00 [INF] End processing HTTP request after 29.417ms - "OK"
2020-11-18 18:39:44.230 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:39:44.234 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:39:44.235 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:39:44.237 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:39:44.239 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:39:44.245 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:39:44.248 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 1079.4084ms
2020-11-18 18:39:44.251 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:44.255 -03:00 [INF] Request finished in 1131.4358ms 200 application/json; charset=utf-8
2020-11-18 18:39:46.253 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:39:46.257 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:39:46.260 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:39:46.265 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:46.268 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:46.271 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:39:46.280 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:39:46.283 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:39:46.286 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:39:46.292 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:39:46.296 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:39:46.299 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:39:46.304 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:39:47.314 -03:00 [INF] Log GetPrincipal
2020-11-18 18:39:47.319 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:39:47.322 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:39:47.345 -03:00 [INF] Received HTTP response after 23.0518ms - "OK"
2020-11-18 18:39:47.349 -03:00 [INF] End processing HTTP request after 30.7719ms - "OK"
2020-11-18 18:39:47.353 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:39:47.359 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:39:47.364 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:39:47.367 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:39:47.369 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:39:47.372 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:39:47.375 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 1076.1296ms
2020-11-18 18:39:47.387 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:47.392 -03:00 [INF] Request finished in 1139.2492ms 200 application/json; charset=utf-8
2020-11-18 18:39:48.062 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/principal  
2020-11-18 18:39:48.065 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:39:48.068 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:39:48.072 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:48.075 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:48.078 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:39:48.082 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:39:48.085 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:39:48.090 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:39:48.095 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:39:48.098 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:39:48.101 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:39:48.108 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:39:49.122 -03:00 [INF] Log GetPrincipal
2020-11-18 18:39:49.125 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:39:49.128 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:39:49.186 -03:00 [INF] Received HTTP response after 58.1266ms - "BadRequest"
2020-11-18 18:39:49.190 -03:00 [INF] End processing HTTP request after 64.3622ms - "BadRequest"
2020-11-18 18:39:49.194 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:39:49.198 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:39:49.202 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:39:49.204 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:39:49.206 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:39:49.208 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:39:49.212 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 1111.2444ms
2020-11-18 18:39:49.215 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:39:49.225 -03:00 [INF] Request finished in 1163.3414ms 200 application/json; charset=utf-8
2020-11-18 18:51:57.691 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:51:59.560 -03:00 [DBG] Hosting starting
2020-11-18 18:51:59.608 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:51:59.803 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:51:59.900 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:51:59.955 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:51:59.961 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:51:59.965 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:51:59.966 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:51:59.967 -03:00 [INF] Hosting environment: Development
2020-11-18 18:51:59.969 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:51:59.971 -03:00 [DBG] Hosting started
2020-11-18 18:52:23.620 -03:00 [DBG] Connection id "0HM4C1GTLKJ3H" received FIN.
2020-11-18 18:52:23.653 -03:00 [DBG] Connection id "0HM4C1GTLKJ3H" accepted.
2020-11-18 18:52:23.661 -03:00 [DBG] Connection id "0HM4C1GTLKJ3H" started.
2020-11-18 18:52:23.664 -03:00 [DBG] Connection id "0HM4C1GTLKJ3I" accepted.
2020-11-18 18:52:23.666 -03:00 [DBG] Connection id "0HM4C1GTLKJ3I" started.
2020-11-18 18:52:23.804 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 18:52:23.930 -03:00 [DBG] Connection id "0HM4C1GTLKJ3H" stopped.
2020-11-18 18:52:23.934 -03:00 [DBG] Connection id "0HM4C1GTLKJ3H" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 18:52:23.953 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:52:23.961 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 18:52:24.007 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:52:24.015 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:52:24.019 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:52:24.026 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:52:24.042 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 18:52:24.147 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:52:24.153 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:52:24.156 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:52:24.158 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:52:24.164 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:52:24.168 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:52:24.172 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:52:24.202 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:52:25.223 -03:00 [INF] Log GetPrincipal
2020-11-18 18:52:25.244 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:52:25.267 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:52:30.350 -03:00 [ERR] A task was canceled.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 18:52:30.496 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:52:30.505 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:52:30.507 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:52:30.509 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:52:30.512 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:52:30.515 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:52:30.561 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 6384.7721ms
2020-11-18 18:52:30.567 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:52:30.572 -03:00 [DBG] Connection id "0HM4C1GTLKJ3I" completed keep alive response.
2020-11-18 18:52:30.578 -03:00 [INF] Request finished in 6628.9605ms 200 application/json; charset=utf-8
2020-11-18 18:53:03.305 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:53:03.307 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:53:03.308 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:53:03.311 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:53:03.313 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:53:03.317 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:53:03.322 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:53:03.326 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:53:03.331 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:53:03.335 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:53:03.338 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:53:03.341 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:53:03.349 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:53:04.362 -03:00 [INF] Log GetPrincipal
2020-11-18 18:53:04.366 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:53:04.370 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:53:09.439 -03:00 [ERR] A task was canceled.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 18:53:09.452 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:53:09.458 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:53:09.462 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:53:09.465 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:53:09.468 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:53:09.471 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:53:09.477 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 6135.9051ms
2020-11-18 18:53:09.481 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:53:09.484 -03:00 [DBG] Connection id "0HM4C1GTLKJ3I" completed keep alive response.
2020-11-18 18:53:09.488 -03:00 [INF] Request finished in 6182.9474ms 200 application/json; charset=utf-8
2020-11-18 18:54:36.689 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:54:37.674 -03:00 [DBG] Hosting starting
2020-11-18 18:54:37.717 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:54:37.896 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:54:38.049 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:54:38.120 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:54:38.137 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:54:38.143 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:54:38.147 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:54:38.148 -03:00 [INF] Hosting environment: Development
2020-11-18 18:54:38.150 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:54:38.155 -03:00 [DBG] Hosting started
2020-11-18 18:54:50.114 -03:00 [DBG] Connection id "0HM4C1I9AN8H6" received FIN.
2020-11-18 18:54:50.128 -03:00 [DBG] Connection id "0HM4C1I9AN8H6" accepted.
2020-11-18 18:54:50.136 -03:00 [DBG] Connection id "0HM4C1I9AN8H6" started.
2020-11-18 18:54:50.139 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" accepted.
2020-11-18 18:54:50.146 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" started.
2020-11-18 18:54:50.175 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 18:54:50.252 -03:00 [DBG] Connection id "0HM4C1I9AN8H6" stopped.
2020-11-18 18:54:50.264 -03:00 [DBG] Connection id "0HM4C1I9AN8H6" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 18:54:50.317 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:54:50.327 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 18:54:50.366 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:54:50.376 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:54:50.379 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:54:50.383 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:54:50.400 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 18:54:50.487 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:54:50.494 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:54:50.497 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:54:50.499 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:54:50.504 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:54:50.508 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:54:50.512 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:54:50.547 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:54:51.570 -03:00 [INF] Log GetPrincipal
2020-11-18 18:54:51.583 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:54:51.605 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:54:57.743 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:55:05.819 -03:00 [INF] End processing HTTP request after 14233.5433ms - "OK"
2020-11-18 18:55:05.832 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:55:05.840 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:55:05.842 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:55:05.845 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:55:05.847 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:55:05.850 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:55:05.880 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 15364.7287ms
2020-11-18 18:55:05.887 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:55:05.893 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" completed keep alive response.
2020-11-18 18:55:05.898 -03:00 [INF] Request finished in 15583.9824ms 200 application/json; charset=utf-8
2020-11-18 18:56:08.195 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:56:08.196 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:56:08.199 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:56:08.201 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:56:08.203 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:56:08.204 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:56:08.209 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:56:08.211 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:56:08.217 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:56:08.221 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:56:08.223 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:56:08.226 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:56:08.232 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:56:09.243 -03:00 [INF] Log GetPrincipal
2020-11-18 18:56:09.247 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:56:09.252 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:56:15.300 -03:00 [INF] End processing HTTP request after 6052.7468ms - "OK"
2020-11-18 18:56:15.305 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:56:15.310 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:56:15.311 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:56:15.313 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:56:15.318 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:56:15.321 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:56:15.325 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 7098.399ms
2020-11-18 18:56:15.330 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:56:15.333 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" completed keep alive response.
2020-11-18 18:56:15.336 -03:00 [INF] Request finished in 7141.2128ms 200 application/json; charset=utf-8
2020-11-18 18:56:50.547 -03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'PaymentApi'
2020-11-18 18:57:00.575 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 18:57:00.582 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.4529ms - processed: 0 items - remaining: 1 items
2020-11-18 18:57:01.180 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:57:01.279 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:57:01.283 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:57:01.287 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:01.290 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:01.310 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:57:01.317 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:57:01.319 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:57:01.325 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:57:01.329 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:57:01.333 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:57:01.337 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:01.344 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:03.232 -03:00 [INF] Log GetPrincipal
2020-11-18 18:57:05.441 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:05.446 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:10.597 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 18:57:10.601 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0078ms - processed: 0 items - remaining: 1 items
2020-11-18 18:57:11.528 -03:00 [INF] End processing HTTP request after 6086.55ms - "OK"
2020-11-18 18:57:21.687 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 18:57:21.688 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:57:21.695 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0094ms - processed: 0 items - remaining: 1 items
2020-11-18 18:57:21.700 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:57:21.705 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:57:21.711 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:57:21.713 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:57:21.716 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:57:21.719 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 20382.7665ms
2020-11-18 18:57:21.725 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:21.730 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" completed keep alive response.
2020-11-18 18:57:21.733 -03:00 [INF] Request finished in 20553.6719ms 200 application/json; charset=utf-8
2020-11-18 18:57:31.712 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 18:57:31.717 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0097ms - processed: 0 items - remaining: 1 items
2020-11-18 18:57:38.335 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:57:38.339 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:57:38.341 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:57:38.345 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:38.349 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:38.352 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:57:38.357 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:57:38.360 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:57:38.365 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:57:38.368 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:57:38.372 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:57:38.375 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:38.381 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:40.581 -03:00 [INF] Log GetPrincipal
2020-11-18 18:57:41.581 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:41.586 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:41.727 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 18:57:41.730 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0102ms - processed: 0 items - remaining: 1 items
2020-11-18 18:57:42.003 -03:00 [INF] Received HTTP response after 416.5519ms - "BadRequest"
2020-11-18 18:57:44.026 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:44.044 -03:00 [INF] Received HTTP response after 17.7497ms - "OK"
2020-11-18 18:57:44.047 -03:00 [INF] End processing HTTP request after 2466.1987ms - "OK"
2020-11-18 18:57:44.055 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:57:44.062 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:57:44.064 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:57:44.066 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:57:44.068 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:57:44.071 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:57:44.077 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5702.0764ms
2020-11-18 18:57:44.081 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:44.084 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" completed keep alive response.
2020-11-18 18:57:44.089 -03:00 [INF] Request finished in 5752.7697ms 200 application/json; charset=utf-8
2020-11-18 18:57:46.926 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:57:46.934 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:57:46.946 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:57:46.950 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:46.952 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:46.955 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:57:46.961 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:57:46.964 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:57:46.966 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:57:46.970 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:57:46.975 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:57:46.978 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:46.981 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:48.781 -03:00 [INF] Log GetPrincipal
2020-11-18 18:57:49.413 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:49.417 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:49.437 -03:00 [INF] Received HTTP response after 20.1631ms - "OK"
2020-11-18 18:57:49.442 -03:00 [INF] End processing HTTP request after 28.9426ms - "OK"
2020-11-18 18:57:49.445 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:57:49.449 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:57:49.451 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:57:49.454 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:57:49.458 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:57:49.461 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:57:49.465 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2486.84ms
2020-11-18 18:57:49.468 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:49.475 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" completed keep alive response.
2020-11-18 18:57:49.477 -03:00 [INF] Request finished in 2551.0609ms 200 application/json; charset=utf-8
2020-11-18 18:57:51.739 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 18:57:51.743 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0055ms - processed: 0 items - remaining: 1 items
2020-11-18 18:57:52.615 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:57:52.619 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:57:52.624 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:57:52.629 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:52.634 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:52.638 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:57:52.642 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:57:52.650 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:57:52.655 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:57:52.665 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:57:52.670 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:57:52.675 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:52.683 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:54.316 -03:00 [INF] Log GetPrincipal
2020-11-18 18:57:55.061 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:55.066 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:57:55.075 -03:00 [INF] Received HTTP response after 8.5032ms - "OK"
2020-11-18 18:57:55.077 -03:00 [INF] End processing HTTP request after 16.2737ms - "OK"
2020-11-18 18:57:55.083 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:57:55.087 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:57:55.091 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:57:55.093 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:57:55.096 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:57:55.099 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:57:55.102 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2427.2543ms
2020-11-18 18:57:55.107 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:55.112 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" completed keep alive response.
2020-11-18 18:57:55.115 -03:00 [INF] Request finished in 2499.7785ms 200 application/json; charset=utf-8
2020-11-18 18:57:58.088 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:57:58.105 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:57:58.110 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:57:58.125 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:58.131 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:57:58.138 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:57:58.144 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:57:58.150 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:57:58.152 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:57:58.158 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:57:58.164 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:57:58.211 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:58.216 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:57:59.917 -03:00 [INF] Log GetPrincipal
2020-11-18 18:58:00.509 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:58:00.514 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:58:00.568 -03:00 [INF] Received HTTP response after 54.48ms - "BadRequest"
2020-11-18 18:58:01.748 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 18:58:01.752 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0286ms - processed: 0 items - remaining: 1 items
2020-11-18 18:58:02.596 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:58:02.670 -03:00 [INF] Received HTTP response after 73.4799ms - "BadRequest"
2020-11-18 18:58:06.681 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:58:06.701 -03:00 [INF] Received HTTP response after 20.1108ms - "OK"
2020-11-18 18:58:06.704 -03:00 [INF] End processing HTTP request after 6194.6649ms - "OK"
2020-11-18 18:58:06.707 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:58:06.714 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:58:06.716 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:58:06.718 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:58:06.721 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:58:06.724 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:58:06.729 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 8518.646ms
2020-11-18 18:58:06.733 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:58:06.736 -03:00 [DBG] Connection id "0HM4C1I9AN8H7" completed keep alive response.
2020-11-18 18:58:06.740 -03:00 [INF] Request finished in 8653.4798ms 200 application/json; charset=utf-8
2020-11-18 18:58:11.770 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 18:58:11.774 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0062ms - processed: 0 items - remaining: 1 items
2020-11-18 18:58:33.907 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 18:58:34.889 -03:00 [DBG] Hosting starting
2020-11-18 18:58:34.942 -03:00 [INF] Hosting enviroment = Development
2020-11-18 18:58:35.134 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 18:58:35.279 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 18:58:35.426 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 18:58:35.469 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 18:58:35.472 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 18:58:35.474 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 18:58:35.475 -03:00 [INF] Hosting environment: Development
2020-11-18 18:58:35.477 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 18:58:35.479 -03:00 [DBG] Hosting started
2020-11-18 18:58:38.133 -03:00 [DBG] Connection id "0HM4C1KD993EE" received FIN.
2020-11-18 18:58:38.156 -03:00 [DBG] Connection id "0HM4C1KD993EE" accepted.
2020-11-18 18:58:38.159 -03:00 [DBG] Connection id "0HM4C1KD993EE" started.
2020-11-18 18:58:38.162 -03:00 [DBG] Connection id "0HM4C1KD993EF" accepted.
2020-11-18 18:58:38.166 -03:00 [DBG] Connection id "0HM4C1KD993EF" started.
2020-11-18 18:58:38.194 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 18:58:38.311 -03:00 [DBG] Connection id "0HM4C1KD993EE" stopped.
2020-11-18 18:58:38.318 -03:00 [DBG] Connection id "0HM4C1KD993EE" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 18:58:38.332 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:58:38.342 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 18:58:38.385 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:58:38.397 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:58:38.400 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:58:38.405 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:58:38.429 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 18:58:38.506 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:58:38.512 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:58:38.514 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:58:38.517 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:58:38.521 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:58:38.526 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:58:38.529 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:58:38.567 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:58:42.219 -03:00 [INF] Log GetPrincipal
2020-11-18 18:58:42.234 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:58:42.259 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:58:48.384 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:58:56.459 -03:00 [INF] End processing HTTP request after 14222.0004ms - "OK"
2020-11-18 18:58:56.472 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:58:56.481 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:58:56.483 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:58:56.486 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:58:56.489 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:58:56.492 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:58:56.524 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 17990.1615ms
2020-11-18 18:58:56.529 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:58:56.534 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 18:58:56.539 -03:00 [INF] Request finished in 18210.7686ms 200 application/json; charset=utf-8
2020-11-18 18:59:15.149 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:59:15.153 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:59:15.157 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:59:15.161 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:59:15.170 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:59:15.173 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:59:15.177 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:59:15.180 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:59:15.184 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:59:15.187 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:59:15.192 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:59:15.195 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:59:15.200 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:59:15.203 -03:00 [INF] Log GetPrincipal
2020-11-18 18:59:15.206 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:15.210 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:18.886 -03:00 [INF] Received HTTP response after 3675.9392ms - "BadRequest"
2020-11-18 18:59:20.903 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:22.334 -03:00 [INF] Received HTTP response after 1431.5796ms - "BadRequest"
2020-11-18 18:59:26.352 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:29.198 -03:00 [INF] Received HTTP response after 2845.9341ms - "OK"
2020-11-18 18:59:29.201 -03:00 [INF] End processing HTTP request after 13995.5096ms - "OK"
2020-11-18 18:59:29.208 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:59:29.213 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:59:29.215 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:59:29.216 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:59:29.218 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:59:29.220 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:59:29.223 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 14028.6281ms
2020-11-18 18:59:29.228 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:59:29.231 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 18:59:29.233 -03:00 [INF] Request finished in 14084.5615ms 200 application/json; charset=utf-8
2020-11-18 18:59:37.413 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:59:37.429 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:59:37.443 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:59:37.446 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:59:37.450 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:59:37.454 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:59:37.459 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:59:37.465 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:59:37.468 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:59:37.471 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:59:37.474 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:59:37.477 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:59:37.482 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:59:37.485 -03:00 [INF] Log GetPrincipal
2020-11-18 18:59:37.486 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:37.490 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:38.214 -03:00 [INF] Received HTTP response after 724.3258ms - "BadRequest"
2020-11-18 18:59:40.240 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:40.987 -03:00 [INF] Received HTTP response after 747.6768ms - "BadRequest"
2020-11-18 18:59:44.994 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:45.592 -03:00 [INF] Received HTTP response after 598.4211ms - "OK"
2020-11-18 18:59:45.596 -03:00 [INF] End processing HTTP request after 8110.0062ms - "OK"
2020-11-18 18:59:45.599 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 18:59:45.603 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 18:59:45.604 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 18:59:45.608 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 18:59:45.610 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 18:59:45.614 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 18:59:45.617 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 8140.0519ms
2020-11-18 18:59:45.620 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:59:45.626 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 18:59:45.630 -03:00 [INF] Request finished in 8217.5663ms 200 application/json; charset=utf-8
2020-11-18 18:59:52.800 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 18:59:52.808 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 18:59:52.812 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 18:59:52.833 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:59:52.836 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 18:59:52.840 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 18:59:52.844 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 18:59:52.847 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 18:59:52.850 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 18:59:52.853 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 18:59:52.856 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 18:59:52.859 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:59:52.863 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 18:59:52.867 -03:00 [INF] Log GetPrincipal
2020-11-18 18:59:52.871 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 18:59:52.875 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:02.003 -03:00 [INF] Received HTTP response after 9128.453ms - "BadRequest"
2020-11-18 19:00:04.021 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:06.008 -03:00 [INF] Received HTTP response after 1986.9058ms - "BadRequest"
2020-11-18 19:00:10.016 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:13.414 -03:00 [INF] Received HTTP response after 3397.8108ms - "OK"
2020-11-18 19:00:13.417 -03:00 [INF] End processing HTTP request after 20546.237ms - "OK"
2020-11-18 19:00:13.420 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:13.424 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:13.426 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:13.429 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:13.431 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:13.434 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:13.437 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 20577.6899ms
2020-11-18 19:00:13.440 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:13.443 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:13.447 -03:00 [INF] Request finished in 20647.8016ms 200 application/json; charset=utf-8
2020-11-18 19:00:20.427 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:20.432 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:20.435 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:20.441 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:20.445 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:20.452 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:20.457 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:20.459 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:20.462 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:20.465 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:20.467 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:20.470 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:20.473 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:20.475 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:20.477 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:20.479 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:21.382 -03:00 [INF] Received HTTP response after 902.9032ms - "OK"
2020-11-18 19:00:21.385 -03:00 [INF] End processing HTTP request after 908.5355ms - "OK"
2020-11-18 19:00:21.388 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:21.392 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:21.393 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:21.395 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:21.397 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:21.399 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:21.401 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 931.4224ms
2020-11-18 19:00:21.405 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:21.411 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:21.414 -03:00 [INF] Request finished in 986.7795ms 200 application/json; charset=utf-8
2020-11-18 19:00:31.364 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:31.366 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:31.368 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:31.371 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:31.377 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:31.380 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:31.385 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:31.387 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:31.390 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:31.393 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:31.396 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:31.399 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:31.401 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:31.403 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:31.406 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:31.409 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:31.415 -03:00 [INF] Received HTTP response after 5.5842ms - "OK"
2020-11-18 19:00:31.418 -03:00 [INF] End processing HTTP request after 11.4746ms - "OK"
2020-11-18 19:00:31.420 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:31.424 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:31.425 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:31.426 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:31.428 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:31.431 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:31.434 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 35.5986ms
2020-11-18 19:00:31.438 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:31.441 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:31.445 -03:00 [INF] Request finished in 80.6407ms 200 application/json; charset=utf-8
2020-11-18 19:00:32.759 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:32.779 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:32.785 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:32.813 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:32.829 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:32.832 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:32.839 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:32.846 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:32.849 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:32.855 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:32.858 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:32.860 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:32.863 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:32.866 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:32.867 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:32.869 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:32.918 -03:00 [INF] Received HTTP response after 48.781ms - "BadRequest"
2020-11-18 19:00:34.942 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:34.962 -03:00 [INF] Received HTTP response after 19.865ms - "OK"
2020-11-18 19:00:34.964 -03:00 [INF] End processing HTTP request after 2096.9437ms - "OK"
2020-11-18 19:00:34.967 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:34.971 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:34.973 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:34.975 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:34.977 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:34.980 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:34.982 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2122.1037ms
2020-11-18 19:00:34.985 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:34.987 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:34.990 -03:00 [INF] Request finished in 2230.1177ms 200 application/json; charset=utf-8
2020-11-18 19:00:36.497 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:36.501 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:36.504 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:36.507 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:36.510 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:36.513 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:36.516 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:36.519 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:36.521 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:36.526 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:36.528 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:36.531 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:36.534 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:36.536 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:36.537 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:36.539 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:36.545 -03:00 [INF] Received HTTP response after 5.6866ms - "OK"
2020-11-18 19:00:36.547 -03:00 [INF] End processing HTTP request after 9.9469ms - "OK"
2020-11-18 19:00:36.550 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:36.571 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:36.575 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:36.577 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:36.578 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:36.581 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:36.583 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 51.8975ms
2020-11-18 19:00:36.586 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:36.589 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:36.591 -03:00 [INF] Request finished in 94.2807ms 200 application/json; charset=utf-8
2020-11-18 19:00:37.565 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:37.588 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:37.592 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:37.595 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:37.597 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:37.603 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:37.613 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:37.616 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:37.619 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:37.622 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:37.626 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:37.629 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:37.633 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:37.638 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:37.640 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:37.643 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:37.705 -03:00 [INF] Received HTTP response after 61.9918ms - "BadRequest"
2020-11-18 19:00:38.569 -03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'PaymentApi'
2020-11-18 19:00:39.729 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:39.745 -03:00 [INF] Received HTTP response after 16.5178ms - "OK"
2020-11-18 19:00:39.748 -03:00 [INF] End processing HTTP request after 2108.0183ms - "OK"
2020-11-18 19:00:39.751 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:39.755 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:39.756 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:39.758 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:39.760 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:39.763 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:39.767 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2137.5714ms
2020-11-18 19:00:39.769 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:39.771 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:39.774 -03:00 [INF] Request finished in 2208.8775ms 200 application/json; charset=utf-8
2020-11-18 19:00:40.690 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:40.692 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:40.695 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:40.698 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:40.701 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:40.703 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:40.708 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:40.712 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:40.714 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:40.718 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:40.720 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:40.724 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:40.727 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:40.731 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:40.734 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:40.737 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:40.756 -03:00 [INF] Received HTTP response after 19.0504ms - "OK"
2020-11-18 19:00:40.758 -03:00 [INF] End processing HTTP request after 24.3054ms - "OK"
2020-11-18 19:00:40.761 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:40.764 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:40.765 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:40.767 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:40.768 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:40.771 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:40.774 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 51.0053ms
2020-11-18 19:00:40.777 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:40.779 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:40.781 -03:00 [INF] Request finished in 91.3795ms 200 application/json; charset=utf-8
2020-11-18 19:00:41.698 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:41.700 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:41.702 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:41.705 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:41.707 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:41.710 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:41.713 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:41.716 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:41.720 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:41.726 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:41.735 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:41.738 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:41.740 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:41.742 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:41.745 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:41.747 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:41.797 -03:00 [INF] Received HTTP response after 49.9322ms - "BadRequest"
2020-11-18 19:00:43.822 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:43.844 -03:00 [INF] Received HTTP response after 21.7427ms - "OK"
2020-11-18 19:00:43.846 -03:00 [INF] End processing HTTP request after 2101.6017ms - "OK"
2020-11-18 19:00:43.850 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:43.859 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:43.861 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:43.863 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:43.864 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:43.866 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:43.869 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2131.3911ms
2020-11-18 19:00:43.873 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:43.875 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:43.878 -03:00 [INF] Request finished in 2179.6194ms 200 application/json; charset=utf-8
2020-11-18 19:00:44.791 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:44.798 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:44.802 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:44.813 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:44.816 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:44.821 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:44.825 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:44.827 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:44.830 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:44.833 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:44.846 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:44.851 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:44.855 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:44.859 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:44.861 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:44.866 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:44.880 -03:00 [INF] Received HTTP response after 13.6538ms - "OK"
2020-11-18 19:00:44.884 -03:00 [INF] End processing HTTP request after 22.118ms - "OK"
2020-11-18 19:00:44.886 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:44.891 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:44.892 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:44.894 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:44.895 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:44.898 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:44.902 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 49.7717ms
2020-11-18 19:00:44.907 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:44.909 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:44.911 -03:00 [INF] Request finished in 119.9072ms 200 application/json; charset=utf-8
2020-11-18 19:00:45.817 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:00:45.820 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:00:45.823 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:00:45.826 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:45.844 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:45.846 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:00:45.850 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:00:45.852 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:00:45.855 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:00:45.858 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:00:45.864 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:00:45.869 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:45.872 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:00:45.874 -03:00 [INF] Log GetPrincipal
2020-11-18 19:00:45.877 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:45.881 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:45.951 -03:00 [INF] Received HTTP response after 70.5449ms - "BadRequest"
2020-11-18 19:00:47.977 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:48.032 -03:00 [INF] Received HTTP response after 55.4558ms - "BadRequest"
2020-11-18 19:00:48.583 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:00:48.589 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0154ms - processed: 0 items - remaining: 1 items
2020-11-18 19:00:52.057 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:00:52.109 -03:00 [INF] Received HTTP response after 51.6684ms - "BadRequest"
2020-11-18 19:00:52.112 -03:00 [INF] End processing HTTP request after 6234.9036ms - "BadRequest"
2020-11-18 19:00:52.115 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:00:52.119 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:00:52.120 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:00:52.122 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:00:52.124 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:00:52.126 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:00:52.129 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 6259.5217ms
2020-11-18 19:00:52.131 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:00:52.133 -03:00 [DBG] Connection id "0HM4C1KD993EF" completed keep alive response.
2020-11-18 19:00:52.137 -03:00 [INF] Request finished in 6319.6333ms 200 application/json; charset=utf-8
2020-11-18 19:01:37.243 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:01:38.217 -03:00 [DBG] Hosting starting
2020-11-18 19:01:38.266 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:01:38.457 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:01:38.634 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:01:38.684 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:01:38.686 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:01:38.687 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:01:38.688 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:01:38.690 -03:00 [INF] Hosting environment: Development
2020-11-18 19:01:38.691 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:01:38.693 -03:00 [DBG] Hosting started
2020-11-18 19:01:46.848 -03:00 [DBG] Connection id "0HM4C1M5H06BC" received FIN.
2020-11-18 19:01:46.867 -03:00 [DBG] Connection id "0HM4C1M5H06BC" accepted.
2020-11-18 19:01:46.873 -03:00 [DBG] Connection id "0HM4C1M5H06BD" accepted.
2020-11-18 19:01:46.875 -03:00 [DBG] Connection id "0HM4C1M5H06BC" started.
2020-11-18 19:01:46.880 -03:00 [DBG] Connection id "0HM4C1M5H06BD" started.
2020-11-18 19:01:46.916 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:01:47.037 -03:00 [DBG] Connection id "0HM4C1M5H06BC" stopped.
2020-11-18 19:01:47.043 -03:00 [DBG] Connection id "0HM4C1M5H06BC" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:01:47.072 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:01:47.079 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:01:47.121 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:01:47.129 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:01:47.133 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:01:47.137 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:01:47.151 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:01:47.229 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:01:47.236 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:01:47.238 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:01:47.241 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:01:47.245 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:01:47.247 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:01:47.250 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:01:47.270 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:01:47.276 -03:00 [INF] Log GetPrincipal
2020-11-18 19:01:47.290 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:01:47.306 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:01:53.410 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:02:01.508 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:02:05.731 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 19:02:05.833 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:02:05.839 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:02:05.840 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:02:05.842 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:02:05.844 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:02:05.846 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:02:05.875 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 18619.882ms
2020-11-18 19:02:05.878 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:02:05.882 -03:00 [DBG] Connection id "0HM4C1M5H06BD" completed keep alive response.
2020-11-18 19:02:05.888 -03:00 [INF] Request finished in 18819.2965ms 200 application/json; charset=utf-8
2020-11-18 19:02:20.863 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:02:21.871 -03:00 [DBG] Hosting starting
2020-11-18 19:02:21.931 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:02:22.304 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:02:22.394 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:02:22.458 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:02:22.462 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:02:22.465 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:02:22.467 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:02:22.468 -03:00 [INF] Hosting environment: Development
2020-11-18 19:02:22.469 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:02:22.471 -03:00 [DBG] Hosting started
2020-11-18 19:02:25.520 -03:00 [DBG] Connection id "0HM4C1MH1PTQC" received FIN.
2020-11-18 19:02:25.534 -03:00 [DBG] Connection id "0HM4C1MH1PTQC" accepted.
2020-11-18 19:02:25.536 -03:00 [DBG] Connection id "0HM4C1MH1PTQC" started.
2020-11-18 19:02:25.539 -03:00 [DBG] Connection id "0HM4C1MH1PTQD" accepted.
2020-11-18 19:02:25.542 -03:00 [DBG] Connection id "0HM4C1MH1PTQD" started.
2020-11-18 19:02:25.571 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:02:25.658 -03:00 [DBG] Connection id "0HM4C1MH1PTQC" stopped.
2020-11-18 19:02:25.661 -03:00 [DBG] Connection id "0HM4C1MH1PTQC" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:02:25.707 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:02:25.714 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:02:25.750 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:02:25.757 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:02:25.761 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:02:25.765 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:02:25.781 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:02:25.853 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:02:25.859 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:02:25.862 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:02:25.864 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:02:25.867 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:02:25.870 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:02:25.873 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:02:25.900 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:02:25.905 -03:00 [INF] Log GetPrincipal
2020-11-18 19:02:25.917 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:02:25.932 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:02:31.002 -03:00 [ERR] A task was canceled.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 19:02:31.103 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:02:31.110 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:02:31.111 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:02:31.113 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:02:31.115 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:02:31.117 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:02:31.146 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5268.0959ms
2020-11-18 19:02:31.149 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:02:31.153 -03:00 [DBG] Connection id "0HM4C1MH1PTQD" completed keep alive response.
2020-11-18 19:02:31.160 -03:00 [INF] Request finished in 5456.6335ms 200 application/json; charset=utf-8
2020-11-18 19:03:26.421 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:03:27.371 -03:00 [DBG] Hosting starting
2020-11-18 19:03:27.456 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:03:27.729 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:03:27.929 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:03:27.980 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:03:27.981 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:03:27.982 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:03:27.984 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:03:27.985 -03:00 [INF] Hosting environment: Development
2020-11-18 19:03:27.987 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:03:27.989 -03:00 [DBG] Hosting started
2020-11-18 19:03:34.541 -03:00 [DBG] Connection id "0HM4C1N5K1HN9" received FIN.
2020-11-18 19:03:34.555 -03:00 [DBG] Connection id "0HM4C1N5K1HN9" accepted.
2020-11-18 19:03:34.558 -03:00 [DBG] Connection id "0HM4C1N5K1HN9" started.
2020-11-18 19:03:34.561 -03:00 [DBG] Connection id "0HM4C1N5K1HNA" accepted.
2020-11-18 19:03:34.564 -03:00 [DBG] Connection id "0HM4C1N5K1HNA" started.
2020-11-18 19:03:34.589 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:03:34.681 -03:00 [DBG] Connection id "0HM4C1N5K1HN9" stopped.
2020-11-18 19:03:34.685 -03:00 [DBG] Connection id "0HM4C1N5K1HN9" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:03:34.720 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:03:34.727 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:03:34.761 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:03:34.769 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:03:34.772 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:34.777 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:34.791 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:03:34.867 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:03:34.872 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:03:34.876 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:03:34.878 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:03:34.881 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:03:34.884 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:03:34.887 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:03:34.911 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:03:34.916 -03:00 [INF] Log GetPrincipal
2020-11-18 19:03:34.936 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:03:34.973 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:03:40.023 -03:00 [ERR] A task was canceled.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 19:03:40.108 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:03:40.114 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:03:40.116 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:03:40.117 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:03:40.119 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:03:40.122 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:03:40.151 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5260.3197ms
2020-11-18 19:03:40.157 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:40.162 -03:00 [DBG] Connection id "0HM4C1N5K1HNA" completed keep alive response.
2020-11-18 19:03:40.167 -03:00 [INF] Request finished in 5450.4764ms 500 application/json; charset=utf-8
2020-11-18 19:03:42.552 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:03:42.555 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:03:42.557 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:03:42.560 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:42.562 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:42.564 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:03:42.568 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:03:42.570 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:03:42.572 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:03:42.576 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:03:42.578 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:03:42.580 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:03:42.583 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:03:42.586 -03:00 [INF] Log GetPrincipal
2020-11-18 19:03:42.587 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:03:42.589 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:03:47.652 -03:00 [ERR] A task was canceled.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 19:03:47.663 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:03:47.669 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:03:47.671 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:03:47.673 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:03:47.675 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:03:47.677 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:03:47.682 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5101.7808ms
2020-11-18 19:03:47.686 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:47.689 -03:00 [DBG] Connection id "0HM4C1N5K1HNA" completed keep alive response.
2020-11-18 19:03:47.692 -03:00 [INF] Request finished in 5139.3105ms 500 application/json; charset=utf-8
2020-11-18 19:03:51.309 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:03:51.312 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:03:51.315 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:03:51.319 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:51.323 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:51.329 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:03:51.342 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:03:51.345 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:03:51.347 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:03:51.350 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:03:51.354 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:03:51.356 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:03:51.360 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:03:51.362 -03:00 [INF] Log GetPrincipal
2020-11-18 19:03:51.364 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:03:51.366 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:03:56.441 -03:00 [ERR] A task was canceled.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 19:03:56.449 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:03:56.454 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:03:56.456 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:03:56.457 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:03:56.459 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:03:56.462 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:03:56.466 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5109.564ms
2020-11-18 19:03:56.469 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:03:56.473 -03:00 [DBG] Connection id "0HM4C1N5K1HNA" completed keep alive response.
2020-11-18 19:03:56.475 -03:00 [INF] Request finished in 5167.0539ms 500 application/json; charset=utf-8
2020-11-18 19:04:26.163 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:04:27.542 -03:00 [DBG] Hosting starting
2020-11-18 19:04:27.729 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:04:27.910 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:04:28.004 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:04:28.049 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:04:28.050 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:04:28.052 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:04:28.055 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:04:28.056 -03:00 [INF] Hosting environment: Development
2020-11-18 19:04:28.057 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:04:28.059 -03:00 [DBG] Hosting started
2020-11-18 19:04:28.653 -03:00 [DBG] Connection id "0HM4C1NLO3A02" received FIN.
2020-11-18 19:04:28.681 -03:00 [DBG] Connection id "0HM4C1NLO3A02" accepted.
2020-11-18 19:04:28.693 -03:00 [DBG] Connection id "0HM4C1NLO3A03" accepted.
2020-11-18 19:04:28.693 -03:00 [DBG] Connection id "0HM4C1NLO3A02" started.
2020-11-18 19:04:28.714 -03:00 [DBG] Connection id "0HM4C1NLO3A03" started.
2020-11-18 19:04:28.752 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:04:28.864 -03:00 [DBG] Connection id "0HM4C1NLO3A02" stopped.
2020-11-18 19:04:28.867 -03:00 [DBG] Connection id "0HM4C1NLO3A02" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:04:28.901 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:04:28.909 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:04:28.945 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:04:28.962 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:04:28.968 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:04:28.973 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:04:28.991 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:04:29.066 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:04:29.072 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:04:29.074 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:04:29.081 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:04:29.085 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:04:29.087 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:04:29.092 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:04:29.119 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:04:29.124 -03:00 [INF] Log GetPrincipal
2020-11-18 19:04:29.138 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:04:29.154 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:04:34.233 -03:00 [ERR] A task was canceled.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 28
2020-11-18 19:04:34.326 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:04:34.333 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:04:34.334 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:04:34.337 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:04:34.346 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:04:34.349 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:04:34.377 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5280.9973ms
2020-11-18 19:04:34.383 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:04:34.388 -03:00 [DBG] Connection id "0HM4C1NLO3A03" completed keep alive response.
2020-11-18 19:04:34.393 -03:00 [INF] Request finished in 5494.9793ms 500 application/json; charset=utf-8
2020-11-18 19:06:29.121 -03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'PaymentApi'
2020-11-18 19:06:39.139 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:06:39.150 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.2688ms - processed: 0 items - remaining: 1 items
2020-11-18 19:06:49.171 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:06:49.177 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0088ms - processed: 0 items - remaining: 1 items
2020-11-18 19:06:59.195 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:06:59.199 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0088ms - processed: 0 items - remaining: 1 items
2020-11-18 19:07:09.206 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:07:09.211 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0088ms - processed: 0 items - remaining: 1 items
2020-11-18 19:07:19.228 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:07:19.231 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0121ms - processed: 0 items - remaining: 1 items
2020-11-18 19:07:29.247 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:07:29.251 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0088ms - processed: 0 items - remaining: 1 items
2020-11-18 19:07:39.264 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:07:39.268 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.009ms - processed: 0 items - remaining: 1 items
2020-11-18 19:07:49.275 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:07:49.280 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0089ms - processed: 0 items - remaining: 1 items
2020-11-18 19:13:02.086 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:13:03.434 -03:00 [FTL] Erro ao iniciar WebHostPrincipal
System.InvalidOperationException: The ConfigureServices method must either be parameterless or take only one parameter of type IServiceCollection.
   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.InvokeCore(Object instance, IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.<>c__DisplayClass9_0.<Invoke>g__Startup|0(IServiceCollection serviceCollection)
   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.Invoke(Object instance, IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.<>c__DisplayClass8_0.<Build>b__0(IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.GenericWebHostBuilder.UseStartup(Type startupType, HostBuilderContext context, IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.GenericWebHostBuilder.<>c__DisplayClass12_0.<UseStartup>b__0(HostBuilderContext context, IServiceCollection services)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at CircuitBreaker.Principal.Api.Program.Main(String[] args) in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\Program.cs:line 23
2020-11-18 19:16:48.223 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:16:49.414 -03:00 [DBG] Hosting starting
2020-11-18 19:16:49.512 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:16:50.036 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:16:50.121 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:16:50.168 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:16:50.171 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:16:50.172 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:16:50.175 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:16:50.176 -03:00 [INF] Hosting environment: Development
2020-11-18 19:16:50.177 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:16:50.179 -03:00 [DBG] Hosting started
2020-11-18 19:16:53.754 -03:00 [DBG] Connection id "0HM4C1UJPU214" received FIN.
2020-11-18 19:16:53.774 -03:00 [DBG] Connection id "0HM4C1UJPU214" accepted.
2020-11-18 19:16:53.806 -03:00 [DBG] Connection id "0HM4C1UJPU215" accepted.
2020-11-18 19:16:53.810 -03:00 [DBG] Connection id "0HM4C1UJPU215" started.
2020-11-18 19:16:53.810 -03:00 [DBG] Connection id "0HM4C1UJPU214" started.
2020-11-18 19:16:53.845 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:16:53.943 -03:00 [DBG] Connection id "0HM4C1UJPU214" stopped.
2020-11-18 19:16:53.947 -03:00 [DBG] Connection id "0HM4C1UJPU214" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:16:53.994 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:16:54.013 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:16:54.079 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:16:54.088 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:16:54.092 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:16:54.097 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:16:54.112 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:16:54.188 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:16:54.194 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:16:54.197 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:16:54.200 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:16:54.204 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:16:54.206 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:16:54.214 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:16:54.243 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:16:54.254 -03:00 [INF] Log GetPrincipal
2020-11-18 19:16:54.258 -03:00 [ERR] Trying again...................................
2020-11-18 19:16:54.271 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:16:54.286 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:17:03.430 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:17:32.494 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:20:26.514 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:20:27.614 -03:00 [DBG] Hosting starting
2020-11-18 19:20:27.698 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:20:28.044 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:20:28.178 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:20:28.235 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:20:28.245 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:20:28.247 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:20:28.252 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:20:28.253 -03:00 [INF] Hosting environment: Development
2020-11-18 19:20:28.254 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:20:28.256 -03:00 [DBG] Hosting started
2020-11-18 19:20:31.288 -03:00 [DBG] Connection id "0HM4C20KKG40N" received FIN.
2020-11-18 19:20:31.302 -03:00 [DBG] Connection id "0HM4C20KKG40N" accepted.
2020-11-18 19:20:31.309 -03:00 [DBG] Connection id "0HM4C20KKG40O" accepted.
2020-11-18 19:20:31.310 -03:00 [DBG] Connection id "0HM4C20KKG40N" started.
2020-11-18 19:20:31.313 -03:00 [DBG] Connection id "0HM4C20KKG40O" started.
2020-11-18 19:20:31.354 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:20:31.442 -03:00 [DBG] Connection id "0HM4C20KKG40N" stopped.
2020-11-18 19:20:31.454 -03:00 [DBG] Connection id "0HM4C20KKG40N" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:20:31.499 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:20:31.507 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:20:31.543 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:20:31.552 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:20:31.558 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:20:31.562 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:20:31.578 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:20:31.669 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:20:31.675 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:20:31.677 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:20:31.680 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:20:31.686 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:20:31.689 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:20:31.696 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:20:31.722 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:20:31.727 -03:00 [INF] Log GetPrincipal
2020-11-18 19:20:31.729 -03:00 [ERR] Trying again...................................
2020-11-18 19:20:31.740 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:20:31.757 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:20:40.895 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:20:49.961 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:20:59.036 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:21:01.925 -03:00 [ERR] The operation was canceled.
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 30
2020-11-18 19:21:02.039 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:21:02.049 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:21:02.050 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:21:02.053 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:21:02.056 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:21:02.060 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:21:02.091 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 30392.2747ms
2020-11-18 19:21:02.096 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:21:02.101 -03:00 [DBG] Connection id "0HM4C20KKG40O" completed keep alive response.
2020-11-18 19:21:02.107 -03:00 [INF] Request finished in 30612.0156ms 500 application/json; charset=utf-8
2020-11-18 19:21:26.890 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:21:28.051 -03:00 [DBG] Hosting starting
2020-11-18 19:21:28.149 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:21:28.812 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:21:28.898 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:21:28.940 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:21:28.957 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:21:28.959 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:21:28.960 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:21:28.961 -03:00 [INF] Hosting environment: Development
2020-11-18 19:21:28.963 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:21:28.965 -03:00 [DBG] Hosting started
2020-11-18 19:21:31.873 -03:00 [DBG] Connection id "0HM4C216M91V9" received FIN.
2020-11-18 19:21:31.888 -03:00 [DBG] Connection id "0HM4C216M91V9" accepted.
2020-11-18 19:21:31.895 -03:00 [DBG] Connection id "0HM4C216M91VA" accepted.
2020-11-18 19:21:31.895 -03:00 [DBG] Connection id "0HM4C216M91V9" started.
2020-11-18 19:21:31.898 -03:00 [DBG] Connection id "0HM4C216M91VA" started.
2020-11-18 19:21:31.937 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:21:32.012 -03:00 [DBG] Connection id "0HM4C216M91V9" stopped.
2020-11-18 19:21:32.031 -03:00 [DBG] Connection id "0HM4C216M91V9" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:21:32.091 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:21:32.099 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:21:32.136 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:21:32.145 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:21:32.148 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:21:32.154 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:21:32.168 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:21:32.248 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:21:32.256 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:21:32.259 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:21:32.262 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:21:32.267 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:21:32.272 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:21:32.276 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:21:32.310 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:21:32.315 -03:00 [INF] Log GetPrincipal
2020-11-18 19:21:32.320 -03:00 [ERR] Trying again...................................
2020-11-18 19:21:32.330 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:21:32.349 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:21:39.500 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:21:46.557 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:21:53.613 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:00.672 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:07.756 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:11.959 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Microsoft.Extensions.Http.PolicyHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 30
2020-11-18 19:22:12.062 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:22:12.073 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:22:12.075 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:22:12.077 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:22:12.080 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:22:12.085 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:22:12.115 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 39834.5655ms
2020-11-18 19:22:12.121 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:22:12.127 -03:00 [DBG] Connection id "0HM4C216M91VA" completed keep alive response.
2020-11-18 19:22:12.134 -03:00 [INF] Request finished in 40046.3338ms 500 application/json; charset=utf-8
2020-11-18 19:22:25.684 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:22:25.690 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:22:25.693 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:22:25.699 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:22:25.703 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:22:25.708 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:22:25.717 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:22:25.721 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:22:25.726 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:22:25.733 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:22:25.738 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:22:25.744 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:22:25.747 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:22:25.756 -03:00 [INF] Log GetPrincipal
2020-11-18 19:22:25.760 -03:00 [ERR] Trying again...................................
2020-11-18 19:22:25.763 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:25.768 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:32.824 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:39.881 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:40.250 -03:00 [INF] Received HTTP response after 364.1129ms - "BadRequest"
2020-11-18 19:22:43.260 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:43.325 -03:00 [INF] Received HTTP response after 65.352ms - "BadRequest"
2020-11-18 19:22:46.337 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:46.431 -03:00 [INF] Received HTTP response after 93.8861ms - "BadRequest"
2020-11-18 19:22:49.464 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:22:49.527 -03:00 [INF] Received HTTP response after 63.8435ms - "BadRequest"
2020-11-18 19:22:49.532 -03:00 [INF] End processing HTTP request after 23768.4875ms - "BadRequest"
2020-11-18 19:22:49.539 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:22:49.546 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:22:49.551 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:22:49.553 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:22:49.555 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:22:49.560 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:22:49.563 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 23819.0869ms
2020-11-18 19:22:49.566 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:22:49.569 -03:00 [DBG] Connection id "0HM4C216M91VA" completed keep alive response.
2020-11-18 19:22:49.572 -03:00 [INF] Request finished in 23888.1801ms 400 application/json; charset=utf-8
2020-11-18 19:23:06.501 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:23:07.590 -03:00 [DBG] Hosting starting
2020-11-18 19:23:07.672 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:23:08.279 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:23:08.398 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:23:08.456 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:23:08.462 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:23:08.464 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:23:08.467 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:23:08.468 -03:00 [INF] Hosting environment: Development
2020-11-18 19:23:08.470 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:23:08.473 -03:00 [DBG] Hosting started
2020-11-18 19:23:10.799 -03:00 [DBG] Connection id "0HM4C2245N3Q6" received FIN.
2020-11-18 19:23:10.817 -03:00 [DBG] Connection id "0HM4C2245N3Q6" accepted.
2020-11-18 19:23:10.820 -03:00 [DBG] Connection id "0HM4C2245N3Q6" started.
2020-11-18 19:23:10.823 -03:00 [DBG] Connection id "0HM4C2245N3Q7" accepted.
2020-11-18 19:23:10.825 -03:00 [DBG] Connection id "0HM4C2245N3Q7" started.
2020-11-18 19:23:10.849 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:23:10.924 -03:00 [DBG] Connection id "0HM4C2245N3Q6" stopped.
2020-11-18 19:23:10.929 -03:00 [DBG] Connection id "0HM4C2245N3Q6" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:23:10.977 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:23:10.987 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:23:11.033 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:23:11.047 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:23:11.054 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:23:11.059 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:23:11.089 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:23:11.167 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:23:11.176 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:23:11.178 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:23:11.183 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:23:11.243 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:23:11.246 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:23:11.253 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:23:11.280 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:23:11.288 -03:00 [INF] Log GetPrincipal
2020-11-18 19:23:11.291 -03:00 [ERR] Trying again...................................
2020-11-18 19:23:11.303 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:23:11.325 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:23:18.447 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:23:18.835 -03:00 [INF] Received HTTP response after 383.7517ms - "BadRequest"
2020-11-18 19:23:21.855 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:23:21.872 -03:00 [INF] Received HTTP response after 17.732ms - "OK"
2020-11-18 19:23:21.878 -03:00 [INF] End processing HTTP request after 10579.0994ms - "OK"
2020-11-18 19:23:21.892 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:23:21.899 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:23:21.903 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:23:21.906 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:23:21.909 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:23:21.913 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:23:21.951 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 10694.2951ms
2020-11-18 19:23:21.961 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:23:21.971 -03:00 [DBG] Connection id "0HM4C2245N3Q7" completed keep alive response.
2020-11-18 19:23:21.977 -03:00 [INF] Request finished in 11003.8417ms 200 application/json; charset=utf-8
2020-11-18 19:42:17.782 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:42:18.833 -03:00 [DBG] Hosting starting
2020-11-18 19:42:18.932 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:42:19.197 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:42:19.294 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:42:19.352 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:42:19.356 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:42:19.366 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:42:19.368 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:42:19.369 -03:00 [INF] Hosting environment: Development
2020-11-18 19:42:19.370 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:42:19.372 -03:00 [DBG] Hosting started
2020-11-18 19:42:22.091 -03:00 [DBG] Connection id "0HM4C2CR99E6J" received FIN.
2020-11-18 19:42:22.110 -03:00 [DBG] Connection id "0HM4C2CR99E6J" accepted.
2020-11-18 19:42:22.115 -03:00 [DBG] Connection id "0HM4C2CR99E6J" started.
2020-11-18 19:42:22.119 -03:00 [DBG] Connection id "0HM4C2CR99E6K" accepted.
2020-11-18 19:42:22.139 -03:00 [DBG] Connection id "0HM4C2CR99E6K" started.
2020-11-18 19:42:22.155 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:42:22.243 -03:00 [DBG] Connection id "0HM4C2CR99E6J" stopped.
2020-11-18 19:42:22.247 -03:00 [DBG] Connection id "0HM4C2CR99E6J" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:42:22.288 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:42:22.296 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:42:22.344 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:42:22.356 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:42:22.361 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:42:22.367 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:42:22.388 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:42:22.470 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:42:22.476 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:42:22.478 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:42:22.481 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:42:22.486 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:42:22.490 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:42:22.494 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:42:22.518 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:42:22.527 -03:00 [INF] Log GetPrincipal
2020-11-18 19:42:22.544 -03:00 [ERR] Trying again...................................
2020-11-18 19:42:22.572 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:42:22.577 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:42:26.862 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 42
2020-11-18 19:42:27.016 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:42:27.024 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:42:27.025 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:42:27.027 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:42:27.030 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:42:27.035 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:42:27.064 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4565.808ms
2020-11-18 19:42:27.069 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:42:27.073 -03:00 [DBG] Connection id "0HM4C2CR99E6K" completed keep alive response.
2020-11-18 19:42:27.078 -03:00 [INF] Request finished in 4794.6211ms 500 application/json; charset=utf-8
2020-11-18 19:42:59.930 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:43:01.062 -03:00 [DBG] Hosting starting
2020-11-18 19:43:01.295 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:43:01.637 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:43:01.747 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:43:01.798 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:43:01.806 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:43:01.807 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:43:01.809 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:43:01.811 -03:00 [INF] Hosting environment: Development
2020-11-18 19:43:01.813 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:43:01.816 -03:00 [DBG] Hosting started
2020-11-18 19:43:04.208 -03:00 [DBG] Connection id "0HM4C2D7QUEVE" received FIN.
2020-11-18 19:43:04.229 -03:00 [DBG] Connection id "0HM4C2D7QUEVE" accepted.
2020-11-18 19:43:04.238 -03:00 [DBG] Connection id "0HM4C2D7QUEVE" started.
2020-11-18 19:43:04.244 -03:00 [DBG] Connection id "0HM4C2D7QUEVF" accepted.
2020-11-18 19:43:04.360 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:43:04.369 -03:00 [DBG] Connection id "0HM4C2D7QUEVF" started.
2020-11-18 19:43:04.477 -03:00 [DBG] Connection id "0HM4C2D7QUEVE" stopped.
2020-11-18 19:43:04.486 -03:00 [DBG] Connection id "0HM4C2D7QUEVE" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:43:04.556 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:43:04.565 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:43:04.601 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:43:04.610 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:43:04.614 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:43:04.619 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:43:04.635 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:43:04.767 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:43:04.775 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:43:04.778 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:43:04.785 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:43:04.790 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:43:04.793 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:43:04.801 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:43:04.828 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:43:04.838 -03:00 [INF] Log GetPrincipal
2020-11-18 19:43:05.119 -03:00 [ERR] Trying again...................................
2020-11-18 19:43:05.152 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:43:05.158 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:43:09.454 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 42
2020-11-18 19:43:09.600 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:43:09.608 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:43:09.611 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:43:09.614 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:43:09.617 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:43:09.620 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:43:09.652 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4845.7307ms
2020-11-18 19:43:09.659 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:43:09.664 -03:00 [DBG] Connection id "0HM4C2D7QUEVF" completed keep alive response.
2020-11-18 19:43:09.670 -03:00 [INF] Request finished in 5117.1162ms 500 application/json; charset=utf-8
2020-11-18 19:43:42.480 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:43:43.418 -03:00 [DBG] Hosting starting
2020-11-18 19:43:43.524 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:43:43.716 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:43:43.807 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:43:43.850 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:43:43.852 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:43:43.858 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:43:43.859 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:43:43.861 -03:00 [INF] Hosting environment: Development
2020-11-18 19:43:43.862 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:43:43.864 -03:00 [DBG] Hosting started
2020-11-18 19:43:48.058 -03:00 [DBG] Connection id "0HM4C2DKT4ID3" received FIN.
2020-11-18 19:43:48.073 -03:00 [DBG] Connection id "0HM4C2DKT4ID3" accepted.
2020-11-18 19:43:48.076 -03:00 [DBG] Connection id "0HM4C2DKT4ID3" started.
2020-11-18 19:43:48.079 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" accepted.
2020-11-18 19:43:48.082 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" started.
2020-11-18 19:43:48.109 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:43:48.199 -03:00 [DBG] Connection id "0HM4C2DKT4ID3" stopped.
2020-11-18 19:43:48.210 -03:00 [DBG] Connection id "0HM4C2DKT4ID3" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:43:48.248 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:43:48.257 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:43:48.295 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:43:48.307 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:43:48.311 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:43:48.317 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:43:48.332 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:43:48.407 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:43:48.420 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:43:48.426 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:43:48.429 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:43:48.434 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:43:48.443 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:43:48.449 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:43:48.477 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:43:48.482 -03:00 [INF] Log GetPrincipal
2020-11-18 19:43:48.494 -03:00 [ERR] Trying again...................................
2020-11-18 19:43:48.518 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:43:48.523 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:43:52.817 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 42
2020-11-18 19:43:52.967 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:43:52.974 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:43:52.978 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:43:52.981 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:43:52.985 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:43:52.988 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:43:53.017 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4566.036ms
2020-11-18 19:43:53.023 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:43:53.027 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:43:53.032 -03:00 [INF] Request finished in 4787.4797ms 500 application/json; charset=utf-8
2020-11-18 19:44:24.216 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:44:24.223 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:44:24.226 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:44:24.229 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:44:24.233 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:44:24.236 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:44:24.240 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:44:24.245 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:44:24.248 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:44:24.252 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:44:24.255 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:44:24.260 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:44:24.264 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:44:24.288 -03:00 [INF] Log GetPrincipal
2020-11-18 19:44:24.291 -03:00 [ERR] Trying again...................................
2020-11-18 19:44:24.293 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:24.296 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:24.703 -03:00 [INF] Received HTTP response after 403.1691ms - "BadRequest"
2020-11-18 19:44:24.708 -03:00 [INF] End processing HTTP request after 414.7077ms - "BadRequest"
2020-11-18 19:44:26.730 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:26.735 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:26.801 -03:00 [INF] Received HTTP response after 65.8885ms - "BadRequest"
2020-11-18 19:44:26.804 -03:00 [INF] End processing HTTP request after 73.9014ms - "BadRequest"
2020-11-18 19:44:30.815 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:30.821 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:30.874 -03:00 [INF] Received HTTP response after 52.6051ms - "BadRequest"
2020-11-18 19:44:30.878 -03:00 [INF] End processing HTTP request after 62.4789ms - "BadRequest"
2020-11-18 19:44:38.885 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:38.890 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:38.942 -03:00 [INF] Received HTTP response after 52.1784ms - "BadRequest"
2020-11-18 19:44:38.947 -03:00 [INF] End processing HTTP request after 62.3455ms - "BadRequest"
2020-11-18 19:44:54.967 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:54.972 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:44:54.979 -03:00 [INF] Received HTTP response after 7.0039ms - "OK"
2020-11-18 19:44:54.986 -03:00 [INF] End processing HTTP request after 19.6209ms - "OK"
2020-11-18 19:44:54.990 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:44:54.995 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:44:55.001 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:44:55.004 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:44:55.006 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:44:55.010 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:44:55.015 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 30755.1611ms
2020-11-18 19:44:55.019 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:44:55.023 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:44:55.026 -03:00 [INF] Request finished in 30809.4935ms 200 application/json; charset=utf-8
2020-11-18 19:45:01.259 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:45:01.268 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:45:01.273 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:45:01.277 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:01.288 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:01.292 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:45:01.296 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:45:01.302 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:45:01.305 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:45:01.309 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:45:01.312 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:45:01.316 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:01.325 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:01.328 -03:00 [INF] Log GetPrincipal
2020-11-18 19:45:01.330 -03:00 [ERR] Trying again...................................
2020-11-18 19:45:01.336 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:01.340 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:01.350 -03:00 [INF] Received HTTP response after 9.9411ms - "OK"
2020-11-18 19:45:01.352 -03:00 [INF] End processing HTTP request after 15.8686ms - "OK"
2020-11-18 19:45:01.356 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:45:01.360 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:45:01.362 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:45:01.367 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:45:01.369 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:45:01.372 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:45:01.375 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 59.5753ms
2020-11-18 19:45:01.385 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:01.388 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:45:01.392 -03:00 [INF] Request finished in 133.9656ms 200 application/json; charset=utf-8
2020-11-18 19:45:03.053 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:45:03.090 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:45:03.093 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:45:03.101 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:03.103 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:03.106 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:45:03.117 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:45:03.121 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:45:03.126 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:45:03.133 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:45:03.136 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:45:03.139 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:03.150 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:03.153 -03:00 [INF] Log GetPrincipal
2020-11-18 19:45:03.155 -03:00 [ERR] Trying again...................................
2020-11-18 19:45:03.157 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:03.161 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:03.177 -03:00 [INF] Received HTTP response after 16.2272ms - "OK"
2020-11-18 19:45:03.180 -03:00 [INF] End processing HTTP request after 22.8599ms - "OK"
2020-11-18 19:45:03.183 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:45:03.188 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:45:03.191 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:45:03.193 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:45:03.195 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:45:03.198 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:45:03.201 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 62.6146ms
2020-11-18 19:45:03.204 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:03.209 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:45:03.211 -03:00 [INF] Request finished in 158.734ms 200 application/json; charset=utf-8
2020-11-18 19:45:04.188 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:45:04.193 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:45:04.197 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:45:04.202 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:04.205 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:04.208 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:45:04.212 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:45:04.217 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:45:04.221 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:45:04.224 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:45:04.227 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:45:04.230 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:04.236 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:04.239 -03:00 [INF] Log GetPrincipal
2020-11-18 19:45:04.241 -03:00 [ERR] Trying again...................................
2020-11-18 19:45:04.243 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:04.247 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:04.255 -03:00 [INF] Received HTTP response after 8.0823ms - "OK"
2020-11-18 19:45:04.257 -03:00 [INF] End processing HTTP request after 14.4577ms - "OK"
2020-11-18 19:45:04.261 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:45:04.268 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:45:04.270 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:45:04.272 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:45:04.274 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:45:04.279 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:45:04.282 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 52.3473ms
2020-11-18 19:45:04.285 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:04.288 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:45:04.290 -03:00 [INF] Request finished in 101.8956ms 200 application/json; charset=utf-8
2020-11-18 19:45:05.100 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:45:05.102 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:45:05.104 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:45:05.107 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:05.110 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:05.113 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:45:05.117 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:45:05.119 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:45:05.122 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:45:05.130 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:45:05.132 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:45:05.136 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:05.139 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:05.143 -03:00 [INF] Log GetPrincipal
2020-11-18 19:45:05.145 -03:00 [ERR] Trying again...................................
2020-11-18 19:45:05.147 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:05.149 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:05.156 -03:00 [INF] Received HTTP response after 7.2633ms - "OK"
2020-11-18 19:45:05.158 -03:00 [INF] End processing HTTP request after 11.6042ms - "OK"
2020-11-18 19:45:05.161 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:45:05.165 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:45:05.167 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:45:05.172 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:45:05.174 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:45:05.177 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:45:05.180 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 44.2443ms
2020-11-18 19:45:05.183 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:05.188 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:45:05.191 -03:00 [INF] Request finished in 90.8314ms 200 application/json; charset=utf-8
2020-11-18 19:45:06.063 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:45:06.069 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:45:06.072 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:45:06.076 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:06.079 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:06.083 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:45:06.087 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:45:06.090 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:45:06.093 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:45:06.099 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:45:06.102 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:45:06.104 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:06.108 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:06.110 -03:00 [INF] Log GetPrincipal
2020-11-18 19:45:06.114 -03:00 [ERR] Trying again...................................
2020-11-18 19:45:06.116 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:06.118 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:06.175 -03:00 [INF] Received HTTP response after 56.8278ms - "BadRequest"
2020-11-18 19:45:06.177 -03:00 [INF] End processing HTTP request after 61.5059ms - "BadRequest"
2020-11-18 19:45:08.187 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:08.191 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:08.197 -03:00 [INF] Received HTTP response after 5.6852ms - "OK"
2020-11-18 19:45:08.199 -03:00 [INF] End processing HTTP request after 11.9301ms - "OK"
2020-11-18 19:45:08.203 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:45:08.210 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:45:08.212 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:45:08.214 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:45:08.217 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:45:08.222 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:45:08.226 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2121.1554ms
2020-11-18 19:45:08.229 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:08.232 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:45:08.234 -03:00 [INF] Request finished in 2171.4378ms 200 application/json; charset=utf-8
2020-11-18 19:45:09.841 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:45:09.847 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:45:09.852 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:45:09.857 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:09.860 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:09.862 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:45:09.868 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:45:09.872 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:45:09.876 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:45:09.880 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:45:09.882 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:45:09.885 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:09.890 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:09.893 -03:00 [INF] Log GetPrincipal
2020-11-18 19:45:09.895 -03:00 [ERR] Trying again...................................
2020-11-18 19:45:09.897 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:09.901 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:09.908 -03:00 [INF] Received HTTP response after 7.3367ms - "OK"
2020-11-18 19:45:09.911 -03:00 [INF] End processing HTTP request after 13.7345ms - "OK"
2020-11-18 19:45:09.913 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:45:09.918 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:45:09.921 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:45:09.923 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:45:09.925 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:45:09.928 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:45:09.931 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 45.3585ms
2020-11-18 19:45:09.937 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:09.940 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:45:09.942 -03:00 [INF] Request finished in 100.7175ms 200 application/json; charset=utf-8
2020-11-18 19:45:10.659 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:45:10.666 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:45:10.676 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:45:10.680 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:10.684 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:10.686 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:45:10.692 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:45:10.695 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:45:10.699 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:45:10.703 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:45:10.708 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:45:10.711 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:10.714 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:10.717 -03:00 [INF] Log GetPrincipal
2020-11-18 19:45:10.718 -03:00 [ERR] Trying again...................................
2020-11-18 19:45:10.722 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:10.725 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:10.731 -03:00 [INF] Received HTTP response after 6.3559ms - "OK"
2020-11-18 19:45:10.733 -03:00 [INF] End processing HTTP request after 11.2178ms - "OK"
2020-11-18 19:45:10.739 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:45:10.742 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:45:10.744 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:45:10.746 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:45:10.748 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:45:10.753 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:45:10.756 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 45.6241ms
2020-11-18 19:45:10.760 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:10.763 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:45:10.767 -03:00 [INF] Request finished in 107.9349ms 200 application/json; charset=utf-8
2020-11-18 19:45:11.419 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:45:11.441 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:45:11.443 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:45:11.446 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:11.451 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:11.454 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:45:11.459 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:45:11.462 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:45:11.466 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:45:11.470 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:45:11.473 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:45:11.476 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:11.479 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:45:11.485 -03:00 [INF] Log GetPrincipal
2020-11-18 19:45:11.486 -03:00 [ERR] Trying again...................................
2020-11-18 19:45:11.489 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:11.491 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:11.541 -03:00 [INF] Received HTTP response after 50.5264ms - "BadRequest"
2020-11-18 19:45:11.544 -03:00 [INF] End processing HTTP request after 55.7556ms - "BadRequest"
2020-11-18 19:45:13.550 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:13.554 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:13.605 -03:00 [INF] Received HTTP response after 50.4552ms - "BadRequest"
2020-11-18 19:45:13.608 -03:00 [INF] End processing HTTP request after 58.0219ms - "BadRequest"
2020-11-18 19:45:17.623 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:17.627 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:45:17.633 -03:00 [INF] Received HTTP response after 5.9907ms - "OK"
2020-11-18 19:45:17.635 -03:00 [INF] End processing HTTP request after 12.0354ms - "OK"
2020-11-18 19:45:17.641 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:45:17.646 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:45:17.648 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:45:17.650 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:45:17.653 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:45:17.658 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:45:17.662 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 6185.9574ms
2020-11-18 19:45:17.665 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:45:17.667 -03:00 [DBG] Connection id "0HM4C2DKT4ID4" completed keep alive response.
2020-11-18 19:45:17.669 -03:00 [INF] Request finished in 6250.1262ms 200 application/json; charset=utf-8
2020-11-18 19:45:48.491 -03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'PaymentApi'
2020-11-18 19:45:58.531 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:45:58.549 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.3833ms - processed: 0 items - remaining: 1 items
2020-11-18 19:46:08.616 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:46:08.844 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0062ms - processed: 0 items - remaining: 1 items
2020-11-18 19:46:18.859 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:46:18.862 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0078ms - processed: 0 items - remaining: 1 items
2020-11-18 19:46:29.724 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:46:30.602 -03:00 [DBG] Hosting starting
2020-11-18 19:46:30.651 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:46:30.845 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:46:30.935 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:46:30.978 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:46:30.983 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:46:30.989 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:46:30.991 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:46:30.992 -03:00 [INF] Hosting environment: Development
2020-11-18 19:46:30.993 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:46:30.995 -03:00 [DBG] Hosting started
2020-11-18 19:46:34.377 -03:00 [DBG] Connection id "0HM4C2F6F941Q" received FIN.
2020-11-18 19:46:34.392 -03:00 [DBG] Connection id "0HM4C2F6F941Q" accepted.
2020-11-18 19:46:34.394 -03:00 [DBG] Connection id "0HM4C2F6F941Q" started.
2020-11-18 19:46:34.398 -03:00 [DBG] Connection id "0HM4C2F6F941R" accepted.
2020-11-18 19:46:34.437 -03:00 [DBG] Connection id "0HM4C2F6F941R" started.
2020-11-18 19:46:34.444 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:46:34.538 -03:00 [DBG] Connection id "0HM4C2F6F941Q" stopped.
2020-11-18 19:46:34.544 -03:00 [DBG] Connection id "0HM4C2F6F941Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:46:34.607 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:46:34.615 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:46:34.653 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:46:34.664 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:46:34.670 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:46:34.675 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:46:34.690 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:46:34.768 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:46:34.774 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:46:34.777 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:46:34.780 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:46:34.787 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:46:34.791 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:46:34.797 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:46:34.824 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:46:34.830 -03:00 [INF] Log GetPrincipal
2020-11-18 19:46:34.844 -03:00 [ERR] Trying again...................................
2020-11-18 19:46:34.870 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:46:34.877 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:46:39.177 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 42
2020-11-18 19:46:39.230 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:46:39.238 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:46:39.240 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:46:39.242 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:46:39.245 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:46:39.247 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:46:39.279 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4478.2965ms
2020-11-18 19:46:39.286 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:46:39.291 -03:00 [DBG] Connection id "0HM4C2F6F941R" completed keep alive response.
2020-11-18 19:46:39.297 -03:00 [INF] Request finished in 4693.4688ms 500 application/json; charset=utf-8
2020-11-18 19:53:32.934 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:53:34.397 -03:00 [DBG] Hosting starting
2020-11-18 19:53:34.468 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:53:34.686 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:53:34.789 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:53:34.845 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:53:34.847 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:53:34.849 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:53:34.853 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:53:34.854 -03:00 [INF] Hosting environment: Development
2020-11-18 19:53:34.855 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:53:34.857 -03:00 [DBG] Hosting started
2020-11-18 19:53:37.092 -03:00 [DBG] Connection id "0HM4C2J4EJ9T3" received FIN.
2020-11-18 19:53:37.107 -03:00 [DBG] Connection id "0HM4C2J4EJ9T3" accepted.
2020-11-18 19:53:37.113 -03:00 [DBG] Connection id "0HM4C2J4EJ9T4" accepted.
2020-11-18 19:53:37.116 -03:00 [DBG] Connection id "0HM4C2J4EJ9T4" started.
2020-11-18 19:53:37.116 -03:00 [DBG] Connection id "0HM4C2J4EJ9T3" started.
2020-11-18 19:53:37.157 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:53:37.345 -03:00 [DBG] Connection id "0HM4C2J4EJ9T3" stopped.
2020-11-18 19:53:37.350 -03:00 [DBG] Connection id "0HM4C2J4EJ9T3" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:53:37.365 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:53:37.373 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:53:37.411 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:53:37.419 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:53:37.424 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:53:37.429 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:53:37.444 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:53:37.529 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:53:37.537 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:53:37.540 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:53:37.542 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:53:37.546 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:53:37.551 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:53:37.555 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:53:37.584 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:53:37.590 -03:00 [INF] Log GetPrincipal
2020-11-18 19:53:42.143 -03:00 [ERR] Trying again...................................
2020-11-18 19:53:42.910 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:53:42.917 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:53:49.931 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 52
2020-11-18 19:53:50.089 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:53:50.099 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:53:50.100 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:53:50.102 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:53:50.106 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:53:50.110 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:53:50.147 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 12588.4148ms
2020-11-18 19:53:50.153 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:53:50.160 -03:00 [DBG] Connection id "0HM4C2J4EJ9T4" completed keep alive response.
2020-11-18 19:53:50.166 -03:00 [INF] Request finished in 12804.1644ms 503 application/json; charset=utf-8
2020-11-18 19:53:56.431 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:53:56.439 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:53:56.442 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:53:56.445 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:53:56.448 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:53:56.452 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:53:56.457 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:53:56.466 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:53:56.470 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:53:56.474 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:53:56.477 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:53:56.482 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:53:56.488 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:53:56.493 -03:00 [INF] Log GetPrincipal
2020-11-18 19:53:59.985 -03:00 [ERR] Trying again...................................
2020-11-18 19:53:59.990 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:53:59.993 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:54:04.184 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 52
2020-11-18 19:54:04.215 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:54:04.220 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:54:04.222 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:54:04.226 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:54:04.228 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:54:04.231 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:54:04.234 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 7752.8234ms
2020-11-18 19:54:04.238 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:54:04.243 -03:00 [DBG] Connection id "0HM4C2J4EJ9T4" completed keep alive response.
2020-11-18 19:54:04.246 -03:00 [INF] Request finished in 7815.0969ms 503 application/json; charset=utf-8
2020-11-18 19:54:05.953 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:54:05.961 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:54:05.964 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:54:05.968 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:54:05.971 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:54:05.980 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:54:05.985 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:54:05.987 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:54:05.992 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:54:05.996 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:54:05.999 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:54:06.002 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:54:06.009 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:54:06.013 -03:00 [INF] Log GetPrincipal
2020-11-18 19:54:07.217 -03:00 [ERR] Trying again...................................
2020-11-18 19:54:07.222 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:54:07.225 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:54:11.378 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 52
2020-11-18 19:54:11.401 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:54:11.406 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:54:11.408 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:54:11.415 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:54:11.417 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:54:11.419 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:54:11.423 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5421.2191ms
2020-11-18 19:54:11.429 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:54:11.433 -03:00 [DBG] Connection id "0HM4C2J4EJ9T4" completed keep alive response.
2020-11-18 19:54:11.435 -03:00 [INF] Request finished in 5482.6046ms 503 application/json; charset=utf-8
2020-11-18 19:54:13.131 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:54:13.134 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:54:13.136 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:54:13.139 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:54:13.144 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:54:13.146 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:54:13.151 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:54:13.153 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:54:13.156 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:54:13.162 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:54:13.165 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:54:13.168 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:54:13.172 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:54:13.178 -03:00 [INF] Log GetPrincipal
2020-11-18 19:54:17.346 -03:00 [ERR] Trying again...................................
2020-11-18 19:54:17.350 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:54:17.352 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:54:21.513 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 52
2020-11-18 19:54:21.532 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:54:21.537 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:54:21.542 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:54:21.544 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:54:21.546 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:54:21.549 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:54:21.552 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 8384.1522ms
2020-11-18 19:54:21.559 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:54:21.561 -03:00 [DBG] Connection id "0HM4C2J4EJ9T4" completed keep alive response.
2020-11-18 19:54:21.564 -03:00 [INF] Request finished in 8433.4466ms 503 application/json; charset=utf-8
2020-11-18 19:54:55.864 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:54:56.867 -03:00 [DBG] Hosting starting
2020-11-18 19:54:56.963 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:54:57.234 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:54:57.343 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:54:57.418 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:54:57.463 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:54:57.465 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:54:57.467 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:54:57.469 -03:00 [INF] Hosting environment: Development
2020-11-18 19:54:57.473 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:54:57.475 -03:00 [DBG] Hosting started
2020-11-18 19:55:00.711 -03:00 [DBG] Connection id "0HM4C2JTC1R48" received FIN.
2020-11-18 19:55:00.726 -03:00 [DBG] Connection id "0HM4C2JTC1R48" accepted.
2020-11-18 19:55:00.730 -03:00 [DBG] Connection id "0HM4C2JTC1R48" started.
2020-11-18 19:55:00.732 -03:00 [DBG] Connection id "0HM4C2JTC1R49" accepted.
2020-11-18 19:55:00.735 -03:00 [DBG] Connection id "0HM4C2JTC1R49" started.
2020-11-18 19:55:00.765 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:55:00.843 -03:00 [DBG] Connection id "0HM4C2JTC1R48" stopped.
2020-11-18 19:55:00.852 -03:00 [DBG] Connection id "0HM4C2JTC1R48" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:55:00.897 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:55:00.906 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:55:00.948 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:55:00.957 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:55:00.962 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:55:00.966 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:55:00.981 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:55:01.056 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:55:01.062 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:55:01.065 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:55:01.067 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:55:01.073 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:55:01.076 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:55:01.080 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:55:01.101 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:55:01.107 -03:00 [INF] Log GetPrincipal
2020-11-18 19:55:01.156 -03:00 [ERR] Trying again...................................
2020-11-18 19:55:01.189 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:01.194 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:05.490 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 52
2020-11-18 19:55:05.592 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:55:05.600 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:55:05.602 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:55:05.604 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:55:05.609 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:55:05.614 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:55:05.645 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4561.4068ms
2020-11-18 19:55:05.692 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:55:05.697 -03:00 [DBG] Connection id "0HM4C2JTC1R49" completed keep alive response.
2020-11-18 19:55:05.702 -03:00 [INF] Request finished in 4808.9438ms 503 application/json; charset=utf-8
2020-11-18 19:55:06.795 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:55:06.798 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:55:06.800 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:55:06.803 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:55:06.807 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:55:06.809 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:55:06.814 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:55:06.817 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:55:06.822 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:55:06.826 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:55:06.828 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:55:06.831 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:55:06.835 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:55:06.841 -03:00 [INF] Log GetPrincipal
2020-11-18 19:55:06.842 -03:00 [ERR] Trying again...................................
2020-11-18 19:55:06.844 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:06.846 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:11.035 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 52
2020-11-18 19:55:11.059 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:55:11.066 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:55:11.067 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:55:11.070 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:55:11.072 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:55:11.075 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:55:11.081 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4249.4332ms
2020-11-18 19:55:11.084 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:55:11.086 -03:00 [DBG] Connection id "0HM4C2JTC1R49" completed keep alive response.
2020-11-18 19:55:11.088 -03:00 [INF] Request finished in 4293.5405ms 503 application/json; charset=utf-8
2020-11-18 19:55:31.274 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:55:31.283 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:55:31.287 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:55:31.291 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:55:31.294 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:55:31.299 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:55:31.305 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:55:31.308 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:55:31.310 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:55:31.316 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:55:31.319 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:55:31.322 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:55:31.326 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:55:31.332 -03:00 [INF] Log GetPrincipal
2020-11-18 19:55:31.333 -03:00 [ERR] Trying again...................................
2020-11-18 19:55:31.337 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:31.340 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:31.745 -03:00 [INF] Received HTTP response after 399.6334ms - "BadRequest"
2020-11-18 19:55:31.749 -03:00 [INF] End processing HTTP request after 411.6156ms - "BadRequest"
2020-11-18 19:55:33.769 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:33.775 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:33.843 -03:00 [INF] Received HTTP response after 67.7307ms - "BadRequest"
2020-11-18 19:55:33.846 -03:00 [INF] End processing HTTP request after 76.5411ms - "BadRequest"
2020-11-18 19:55:37.857 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:37.863 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:37.915 -03:00 [INF] Received HTTP response after 52.4208ms - "BadRequest"
2020-11-18 19:55:37.919 -03:00 [INF] End processing HTTP request after 61.6555ms - "BadRequest"
2020-11-18 19:55:45.928 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:45.933 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:55:45.988 -03:00 [INF] Received HTTP response after 54.9795ms - "BadRequest"
2020-11-18 19:55:45.992 -03:00 [INF] End processing HTTP request after 64.9231ms - "BadRequest"
2020-11-18 19:56:01.999 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:02.003 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:02.055 -03:00 [INF] Received HTTP response after 51.7583ms - "BadRequest"
2020-11-18 19:56:02.065 -03:00 [INF] End processing HTTP request after 65.5275ms - "BadRequest"
2020-11-18 19:56:17.162 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 19:56:18.161 -03:00 [DBG] Hosting starting
2020-11-18 19:56:18.216 -03:00 [INF] Hosting enviroment = Development
2020-11-18 19:56:18.417 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 19:56:18.533 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 19:56:18.585 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 19:56:18.599 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 19:56:18.601 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 19:56:18.604 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 19:56:18.606 -03:00 [INF] Hosting environment: Development
2020-11-18 19:56:18.607 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 19:56:18.609 -03:00 [DBG] Hosting started
2020-11-18 19:56:28.378 -03:00 [DBG] Connection id "0HM4C2KNG3NJ9" received FIN.
2020-11-18 19:56:28.393 -03:00 [DBG] Connection id "0HM4C2KNG3NJ9" accepted.
2020-11-18 19:56:28.396 -03:00 [DBG] Connection id "0HM4C2KNG3NJ9" started.
2020-11-18 19:56:28.399 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" accepted.
2020-11-18 19:56:28.403 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" started.
2020-11-18 19:56:28.434 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 19:56:28.503 -03:00 [DBG] Connection id "0HM4C2KNG3NJ9" stopped.
2020-11-18 19:56:28.521 -03:00 [DBG] Connection id "0HM4C2KNG3NJ9" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 19:56:28.582 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:56:28.591 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 19:56:28.631 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:56:28.640 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:56:28.644 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:28.648 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:28.664 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 19:56:28.739 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:56:28.746 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:56:28.749 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:56:28.753 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:56:28.760 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:56:28.763 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:56:28.769 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:28.798 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:28.811 -03:00 [INF] Log GetPrincipal
2020-11-18 19:56:28.855 -03:00 [ERR] Trying again...................................
2020-11-18 19:56:28.877 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:28.882 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:29.245 -03:00 [INF] Received HTTP response after 359.0069ms - "OK"
2020-11-18 19:56:29.250 -03:00 [INF] End processing HTTP request after 374.9825ms - "OK"
2020-11-18 19:56:29.264 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:56:29.270 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:56:29.273 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:56:29.276 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:56:29.278 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:56:29.282 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:56:29.311 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 538.5685ms
2020-11-18 19:56:29.315 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:29.319 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" completed keep alive response.
2020-11-18 19:56:29.325 -03:00 [INF] Request finished in 747.3653ms 200 application/json; charset=utf-8
2020-11-18 19:56:32.261 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:56:32.265 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:56:32.271 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:56:32.275 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:32.278 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:32.284 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:56:32.290 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:56:32.293 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:56:32.296 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:56:32.308 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:56:32.311 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:56:32.317 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:32.322 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:32.328 -03:00 [INF] Log GetPrincipal
2020-11-18 19:56:32.332 -03:00 [ERR] Trying again...................................
2020-11-18 19:56:32.335 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:32.338 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:32.449 -03:00 [INF] Received HTTP response after 111.8603ms - "BadRequest"
2020-11-18 19:56:32.452 -03:00 [INF] End processing HTTP request after 116.9358ms - "BadRequest"
2020-11-18 19:56:34.478 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:34.483 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:34.545 -03:00 [INF] Received HTTP response after 61.686ms - "BadRequest"
2020-11-18 19:56:34.550 -03:00 [INF] End processing HTTP request after 71.8765ms - "BadRequest"
2020-11-18 19:56:34.556 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:56:34.563 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:56:34.565 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:56:34.567 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:56:34.569 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:56:34.572 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:56:34.578 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2261.1291ms
2020-11-18 19:56:34.581 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:34.585 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" completed keep alive response.
2020-11-18 19:56:34.587 -03:00 [INF] Request finished in 2325.6896ms 400 application/json; charset=utf-8
2020-11-18 19:56:36.753 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:56:36.761 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:56:36.764 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:56:36.767 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:36.785 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:36.792 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:56:36.802 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:56:36.806 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:56:36.810 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:56:36.814 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:56:36.816 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:56:36.820 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:36.827 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:36.829 -03:00 [INF] Log GetPrincipal
2020-11-18 19:56:36.831 -03:00 [ERR] Trying again...................................
2020-11-18 19:56:36.833 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:36.835 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:36.890 -03:00 [INF] Received HTTP response after 55.2197ms - "BadRequest"
2020-11-18 19:56:36.893 -03:00 [INF] End processing HTTP request after 60.0766ms - "BadRequest"
2020-11-18 19:56:38.908 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:38.913 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:56:38.967 -03:00 [INF] Received HTTP response after 54.4301ms - "BadRequest"
2020-11-18 19:56:38.971 -03:00 [INF] End processing HTTP request after 62.3249ms - "BadRequest"
2020-11-18 19:56:38.975 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:56:38.980 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:56:38.981 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:56:38.983 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:56:38.987 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:56:38.990 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:56:38.993 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2173.8855ms
2020-11-18 19:56:38.996 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:38.999 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" completed keep alive response.
2020-11-18 19:56:39.004 -03:00 [INF] Request finished in 2250.7315ms 400 application/json; charset=utf-8
2020-11-18 19:56:40.196 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:56:40.203 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:56:40.207 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:56:40.212 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:40.216 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:40.220 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:56:40.226 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:56:40.230 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:56:40.233 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:56:40.237 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:56:40.241 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:56:40.246 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:40.250 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:40.252 -03:00 [INF] Log GetPrincipal
2020-11-18 19:56:46.091 -03:00 [ERR] Circuit is Opened
System.Exception: Circuit is Opened
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 50
2020-11-18 19:56:46.187 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:56:46.191 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:56:46.193 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:56:46.195 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:56:46.197 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:56:46.202 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:56:46.205 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 5958.5599ms
2020-11-18 19:56:46.209 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:46.211 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" completed keep alive response.
2020-11-18 19:56:46.213 -03:00 [INF] Request finished in 6018.8627ms 503 application/json; charset=utf-8
2020-11-18 19:56:49.582 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:56:49.610 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:56:49.635 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:56:49.733 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:49.742 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:49.748 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:56:49.783 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:56:49.786 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:56:49.789 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:56:49.795 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:56:49.798 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:56:49.801 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:49.804 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:56:49.810 -03:00 [INF] Log GetPrincipal
2020-11-18 19:56:51.549 -03:00 [ERR] Circuit is Opened
System.Exception: Circuit is Opened
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 50
2020-11-18 19:56:51.555 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:56:51.560 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:56:51.562 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:56:51.566 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:56:51.568 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:56:51.571 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:56:51.575 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 1774.3072ms
2020-11-18 19:56:51.580 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:56:51.585 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" completed keep alive response.
2020-11-18 19:56:51.587 -03:00 [INF] Request finished in 2005.2552ms 503 application/json; charset=utf-8
2020-11-18 19:57:03.939 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:57:03.943 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:57:03.945 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:57:03.948 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:03.953 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:03.957 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:57:03.964 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:57:03.968 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:57:03.972 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:57:03.976 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:57:03.979 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:57:03.985 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:57:03.989 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:57:03.992 -03:00 [INF] Log GetPrincipal
2020-11-18 19:57:06.311 -03:00 [ERR] Circuit is Opened
System.Exception: Circuit is Opened
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 50
2020-11-18 19:57:06.316 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:57:06.320 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:57:06.322 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:57:06.326 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:57:06.329 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:57:06.332 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:57:06.335 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2349.4369ms
2020-11-18 19:57:06.338 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:06.341 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" completed keep alive response.
2020-11-18 19:57:06.346 -03:00 [INF] Request finished in 2407.5368ms 503 application/json; charset=utf-8
2020-11-18 19:57:42.101 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:57:42.153 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:57:42.156 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:57:42.169 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:42.171 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:42.178 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:57:42.189 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:57:42.202 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:57:42.205 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:57:42.236 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:57:42.372 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:57:42.455 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:57:42.534 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:57:42.581 -03:00 [INF] Log GetPrincipal
2020-11-18 19:57:47.580 -03:00 [ERR] Trying again...................................
2020-11-18 19:57:47.675 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:57:47.678 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:57:47.728 -03:00 [INF] Received HTTP response after 50.6854ms - "BadRequest"
2020-11-18 19:57:47.732 -03:00 [INF] End processing HTTP request after 57.3617ms - "BadRequest"
2020-11-18 19:57:49.760 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:57:49.764 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 19:57:49.817 -03:00 [INF] Received HTTP response after 53.0787ms - "BadRequest"
2020-11-18 19:57:49.820 -03:00 [INF] End processing HTTP request after 59.2912ms - "BadRequest"
2020-11-18 19:57:49.823 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:57:49.828 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:57:49.829 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:57:49.832 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:57:49.834 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:57:49.837 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:57:49.844 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 7389.2282ms
2020-11-18 19:57:49.855 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:49.866 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" completed keep alive response.
2020-11-18 19:57:49.871 -03:00 [INF] Request finished in 7770.1597ms 400 application/json; charset=utf-8
2020-11-18 19:57:51.778 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 19:57:51.782 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 19:57:51.784 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 19:57:51.788 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:51.791 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:51.794 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 19:57:51.802 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 19:57:51.806 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 19:57:51.809 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 19:57:51.815 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 19:57:51.818 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 19:57:51.821 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:57:51.826 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 19:57:51.831 -03:00 [INF] Log GetPrincipal
2020-11-18 19:57:53.853 -03:00 [ERR] Circuit is Opened
System.Exception: Circuit is Opened
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 50
2020-11-18 19:57:53.859 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 19:57:53.865 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 19:57:53.866 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 19:57:53.868 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 19:57:53.870 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 19:57:53.875 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 19:57:53.878 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2056.9146ms
2020-11-18 19:57:53.881 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 19:57:53.883 -03:00 [DBG] Connection id "0HM4C2KNG3NJA" completed keep alive response.
2020-11-18 19:57:53.885 -03:00 [INF] Request finished in 2107.9294ms 503 application/json; charset=utf-8
2020-11-18 19:58:28.850 -03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'PaymentApi'
2020-11-18 19:58:38.883 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:58:38.901 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.396ms - processed: 0 items - remaining: 1 items
2020-11-18 19:58:48.966 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:58:49.054 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0083ms - processed: 0 items - remaining: 1 items
2020-11-18 19:58:59.083 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 19:58:59.087 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0953ms - processed: 0 items - remaining: 1 items
2020-11-18 20:01:53.938 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 20:01:55.217 -03:00 [DBG] Hosting starting
2020-11-18 20:01:55.270 -03:00 [INF] Hosting enviroment = Development
2020-11-18 20:01:55.470 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 20:01:55.555 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 20:01:55.604 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 20:01:55.608 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 20:01:55.612 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 20:01:55.614 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 20:01:55.615 -03:00 [INF] Hosting environment: Development
2020-11-18 20:01:55.616 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 20:01:55.618 -03:00 [DBG] Hosting started
2020-11-18 20:02:12.149 -03:00 [DBG] Connection id "0HM4C2NTUI7L0" received FIN.
2020-11-18 20:02:12.164 -03:00 [DBG] Connection id "0HM4C2NTUI7L0" accepted.
2020-11-18 20:02:12.171 -03:00 [DBG] Connection id "0HM4C2NTUI7L0" started.
2020-11-18 20:02:12.174 -03:00 [DBG] Connection id "0HM4C2NTUI7L1" accepted.
2020-11-18 20:02:12.179 -03:00 [DBG] Connection id "0HM4C2NTUI7L1" started.
2020-11-18 20:02:12.204 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 20:02:12.286 -03:00 [DBG] Connection id "0HM4C2NTUI7L0" stopped.
2020-11-18 20:02:12.291 -03:00 [DBG] Connection id "0HM4C2NTUI7L0" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 20:02:12.330 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:02:12.338 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 20:02:12.379 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:02:12.391 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:02:12.396 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:02:12.426 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:02:12.445 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 20:02:12.521 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:02:12.528 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:02:12.531 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:02:12.533 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:02:12.537 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:02:12.539 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:02:12.545 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:02:12.567 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:02:12.577 -03:00 [INF] Log GetPrincipal
2020-11-18 20:02:12.630 -03:00 [ERR] Trying again...................................
2020-11-18 20:02:12.653 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:02:12.658 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:02:52.592 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 20:02:53.682 -03:00 [DBG] Hosting starting
2020-11-18 20:02:53.754 -03:00 [INF] Hosting enviroment = Development
2020-11-18 20:02:53.975 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 20:02:54.141 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 20:02:54.184 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 20:02:54.194 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 20:02:54.196 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 20:02:54.198 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 20:02:54.211 -03:00 [INF] Hosting environment: Development
2020-11-18 20:02:54.212 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 20:02:54.219 -03:00 [DBG] Hosting started
2020-11-18 20:02:55.232 -03:00 [DBG] Connection id "0HM4C2OAPE7TI" received FIN.
2020-11-18 20:02:55.249 -03:00 [DBG] Connection id "0HM4C2OAPE7TI" accepted.
2020-11-18 20:02:55.252 -03:00 [DBG] Connection id "0HM4C2OAPE7TI" started.
2020-11-18 20:02:55.255 -03:00 [DBG] Connection id "0HM4C2OAPE7TJ" accepted.
2020-11-18 20:02:55.259 -03:00 [DBG] Connection id "0HM4C2OAPE7TJ" started.
2020-11-18 20:02:55.286 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 20:02:55.354 -03:00 [DBG] Connection id "0HM4C2OAPE7TI" stopped.
2020-11-18 20:02:55.372 -03:00 [DBG] Connection id "0HM4C2OAPE7TI" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 20:02:55.430 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:02:55.440 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 20:02:55.476 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:02:55.484 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:02:55.488 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:02:55.493 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:02:55.509 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 20:02:55.584 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:02:55.590 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:02:55.593 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:02:55.598 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:02:55.602 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:02:55.605 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:02:55.611 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:02:55.651 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:02:55.657 -03:00 [INF] Log GetPrincipal
2020-11-18 20:02:56.952 -03:00 [ERR] Trying again...................................
2020-11-18 20:02:57.470 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:02:57.475 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:03:18.383 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 20:03:19.461 -03:00 [DBG] Hosting starting
2020-11-18 20:03:19.530 -03:00 [INF] Hosting enviroment = Development
2020-11-18 20:03:19.830 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 20:03:20.015 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 20:03:20.148 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 20:03:20.176 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 20:03:20.178 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 20:03:20.179 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 20:03:20.180 -03:00 [INF] Hosting environment: Development
2020-11-18 20:03:20.181 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 20:03:20.183 -03:00 [DBG] Hosting started
2020-11-18 20:03:21.790 -03:00 [DBG] Connection id "0HM4C2OIMN48P" received FIN.
2020-11-18 20:03:21.815 -03:00 [DBG] Connection id "0HM4C2OIMN48P" accepted.
2020-11-18 20:03:21.818 -03:00 [DBG] Connection id "0HM4C2OIMN48P" started.
2020-11-18 20:03:21.821 -03:00 [DBG] Connection id "0HM4C2OIMN48Q" accepted.
2020-11-18 20:03:21.823 -03:00 [DBG] Connection id "0HM4C2OIMN48Q" started.
2020-11-18 20:03:21.848 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 20:03:21.933 -03:00 [DBG] Connection id "0HM4C2OIMN48P" stopped.
2020-11-18 20:03:21.943 -03:00 [DBG] Connection id "0HM4C2OIMN48P" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 20:03:21.988 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:03:22.000 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 20:03:22.047 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:03:22.055 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:03:22.058 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:03:22.063 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:03:22.080 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 20:03:22.154 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:03:22.161 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:03:22.164 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:03:22.166 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:03:22.170 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:03:22.172 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:03:22.178 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:03:22.205 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:03:22.216 -03:00 [INF] Log GetPrincipal
2020-11-18 20:03:23.402 -03:00 [ERR] Trying again...................................
2020-11-18 20:03:23.864 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:03:23.870 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:04:16.270 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 56
2020-11-18 20:04:16.382 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:04:16.389 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:04:16.391 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:04:16.395 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:04:16.402 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:04:16.405 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:04:16.450 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 54266.2611ms
2020-11-18 20:04:16.461 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:04:16.468 -03:00 [DBG] Connection id "0HM4C2OIMN48Q" completed keep alive response.
2020-11-18 20:04:16.473 -03:00 [INF] Request finished in 54489.0951ms 503 application/json; charset=utf-8
2020-11-18 20:06:03.785 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 20:06:04.772 -03:00 [DBG] Hosting starting
2020-11-18 20:06:04.821 -03:00 [INF] Hosting enviroment = Development
2020-11-18 20:06:05.050 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 20:06:05.298 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 20:06:05.364 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 20:06:05.370 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 20:06:05.375 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 20:06:05.377 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 20:06:05.379 -03:00 [INF] Hosting environment: Development
2020-11-18 20:06:05.380 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 20:06:05.381 -03:00 [DBG] Hosting started
2020-11-18 20:06:08.921 -03:00 [DBG] Connection id "0HM4C2Q4GJCRA" received FIN.
2020-11-18 20:06:08.937 -03:00 [DBG] Connection id "0HM4C2Q4GJCRA" accepted.
2020-11-18 20:06:08.960 -03:00 [DBG] Connection id "0HM4C2Q4GJCRB" accepted.
2020-11-18 20:06:08.964 -03:00 [DBG] Connection id "0HM4C2Q4GJCRB" started.
2020-11-18 20:06:08.964 -03:00 [DBG] Connection id "0HM4C2Q4GJCRA" started.
2020-11-18 20:06:09.008 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 20:06:09.086 -03:00 [DBG] Connection id "0HM4C2Q4GJCRA" stopped.
2020-11-18 20:06:09.100 -03:00 [DBG] Connection id "0HM4C2Q4GJCRA" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 20:06:09.148 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:06:09.156 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 20:06:09.197 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:06:09.207 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:06:09.211 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:06:09.217 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:06:09.232 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 20:06:09.319 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:06:09.325 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:06:09.329 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:06:09.332 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:06:09.335 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:06:09.338 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:06:09.344 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:06:09.372 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:06:09.382 -03:00 [INF] Log GetPrincipal
2020-11-18 20:06:10.602 -03:00 [ERR] Trying again...................................
2020-11-18 20:06:11.123 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:06:11.131 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:06:18.058 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 57
2020-11-18 20:06:19.443 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:06:19.452 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:06:19.454 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:06:19.456 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:06:19.458 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:06:19.465 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:06:19.498 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 10149.6962ms
2020-11-18 20:06:19.504 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:06:19.508 -03:00 [DBG] Connection id "0HM4C2Q4GJCRB" completed keep alive response.
2020-11-18 20:06:19.518 -03:00 [INF] Request finished in 10373.4498ms 503 application/json; charset=utf-8
2020-11-18 20:06:21.959 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:06:21.963 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:06:21.966 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:06:21.969 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:06:21.972 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:06:21.978 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:06:21.983 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:06:21.986 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:06:21.989 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:06:21.995 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:06:21.998 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:06:22.001 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:06:22.006 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:06:22.013 -03:00 [INF] Log GetPrincipal
2020-11-18 20:06:23.087 -03:00 [ERR] Trying again...................................
2020-11-18 20:06:23.479 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:06:23.484 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:07:44.551 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 20:07:45.654 -03:00 [DBG] Hosting starting
2020-11-18 20:07:45.727 -03:00 [INF] Hosting enviroment = Development
2020-11-18 20:07:45.991 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 20:07:46.085 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 20:07:46.166 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 20:07:46.180 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 20:07:46.181 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 20:07:46.183 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 20:07:46.184 -03:00 [INF] Hosting environment: Development
2020-11-18 20:07:46.185 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 20:07:46.187 -03:00 [DBG] Hosting started
2020-11-18 20:07:47.234 -03:00 [DBG] Connection id "0HM4C2R1Q64AQ" received FIN.
2020-11-18 20:07:47.248 -03:00 [DBG] Connection id "0HM4C2R1Q64AQ" accepted.
2020-11-18 20:07:47.259 -03:00 [DBG] Connection id "0HM4C2R1Q64AR" accepted.
2020-11-18 20:07:47.260 -03:00 [DBG] Connection id "0HM4C2R1Q64AQ" started.
2020-11-18 20:07:47.273 -03:00 [DBG] Connection id "0HM4C2R1Q64AR" started.
2020-11-18 20:07:47.307 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 20:07:47.401 -03:00 [DBG] Connection id "0HM4C2R1Q64AQ" stopped.
2020-11-18 20:07:47.407 -03:00 [DBG] Connection id "0HM4C2R1Q64AQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 20:07:47.474 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:07:47.482 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 20:07:47.519 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:07:47.527 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:07:47.531 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:07:47.537 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:07:47.551 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 20:07:47.635 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:07:47.644 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:07:47.648 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:07:47.651 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:07:47.654 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:07:47.659 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:07:47.668 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:07:47.692 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:07:47.698 -03:00 [INF] Log GetPrincipal
2020-11-18 20:07:52.754 -03:00 [ERR] Trying again...................................
2020-11-18 20:07:52.778 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:07:52.786 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:07:57.061 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 57
2020-11-18 20:08:00.682 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:08:00.691 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:08:00.692 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:08:00.696 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:08:00.699 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:08:00.702 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:08:00.734 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 13061.6934ms
2020-11-18 20:08:00.740 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:00.744 -03:00 [DBG] Connection id "0HM4C2R1Q64AR" completed keep alive response.
2020-11-18 20:08:00.756 -03:00 [INF] Request finished in 13285.2041ms 503 application/json; charset=utf-8
2020-11-18 20:08:03.441 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:08:03.444 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:08:03.446 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:08:03.450 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:03.452 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:03.457 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:08:03.462 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:08:03.464 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:08:03.469 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:08:03.474 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:08:03.476 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:08:03.480 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:08:03.484 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:08:03.489 -03:00 [INF] Log GetPrincipal
2020-11-18 20:08:06.857 -03:00 [ERR] Trying again...................................
2020-11-18 20:08:06.861 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:08:06.864 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:08:11.025 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 57
2020-11-18 20:08:30.539 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:08:30.547 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:08:30.549 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:08:30.551 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:08:30.553 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:08:30.558 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:08:30.561 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 27081.0701ms
2020-11-18 20:08:30.570 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:30.574 -03:00 [DBG] Connection id "0HM4C2R1Q64AR" completed keep alive response.
2020-11-18 20:08:30.577 -03:00 [INF] Request finished in 27136.0195ms 503 application/json; charset=utf-8
2020-11-18 20:08:33.584 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:08:33.588 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:08:33.591 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:08:33.598 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:33.601 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:33.604 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:08:33.608 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:08:33.613 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:08:33.615 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:08:33.619 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:08:33.622 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:08:33.625 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:08:33.631 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:08:33.634 -03:00 [INF] Log GetPrincipal
2020-11-18 20:08:41.113 -03:00 [ERR] Trying again...................................
2020-11-18 20:08:41.175 -03:00 [ERR] The circuit is manually held open and is not allowing calls.
Polly.CircuitBreaker.IsolatedCircuitException: The circuit is manually held open and is not allowing calls.
   at Polly.CircuitBreaker.CircuitStateController`1.OnActionPreExecute()
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 57
2020-11-18 20:08:41.874 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:08:41.880 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:08:41.883 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:08:41.887 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:08:41.889 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:08:41.892 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:08:41.896 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 8270.8244ms
2020-11-18 20:08:41.902 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:41.905 -03:00 [DBG] Connection id "0HM4C2R1Q64AR" completed keep alive response.
2020-11-18 20:08:41.907 -03:00 [INF] Request finished in 8323.1638ms 503 application/json; charset=utf-8
2020-11-18 20:08:54.717 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:08:54.721 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:08:54.723 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:08:54.728 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:54.731 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:08:54.734 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:08:54.748 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:08:54.751 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:08:54.754 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:08:54.758 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:08:54.763 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:08:54.766 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:08:54.771 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:08:54.777 -03:00 [INF] Log GetPrincipal
2020-11-18 20:08:58.142 -03:00 [ERR] Trying again...................................
2020-11-18 20:09:41.436 -03:00 [ERR] The circuit is manually held open and is not allowing calls.
Polly.CircuitBreaker.IsolatedCircuitException: The circuit is manually held open and is not allowing calls.
   at Polly.CircuitBreaker.CircuitStateController`1.OnActionPreExecute()
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 57
2020-11-18 20:11:38.644 -03:00 [INF] Iniciando WebHost Principal
2020-11-18 20:11:39.616 -03:00 [DBG] Hosting starting
2020-11-18 20:11:39.666 -03:00 [INF] Hosting enviroment = Development
2020-11-18 20:11:39.895 -03:00 [DBG] Failed to locate the development https certificate at 'null'.
2020-11-18 20:11:40.035 -03:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 17C5188C3C3CD295998CD32D5600758CA350C90F)
2020-11-18 20:11:40.081 -03:00 [INF] Now listening on: https://localhost:5001
2020-11-18 20:11:40.180 -03:00 [INF] Now listening on: http://localhost:5000
2020-11-18 20:11:40.184 -03:00 [DBG] Loaded hosting startup assembly CircuitBreaker.Principal.Api
2020-11-18 20:11:40.186 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2020-11-18 20:11:40.187 -03:00 [INF] Hosting environment: Development
2020-11-18 20:11:40.190 -03:00 [INF] Content root path: D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api
2020-11-18 20:11:40.192 -03:00 [DBG] Hosting started
2020-11-18 20:11:44.980 -03:00 [DBG] Connection id "0HM4C2T8LGFE0" received FIN.
2020-11-18 20:11:45.000 -03:00 [DBG] Connection id "0HM4C2T8LGFE0" accepted.
2020-11-18 20:11:45.016 -03:00 [DBG] Connection id "0HM4C2T8LGFE0" started.
2020-11-18 20:11:45.019 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" accepted.
2020-11-18 20:11:45.034 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" started.
2020-11-18 20:11:45.057 -03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2020-11-18 20:11:45.146 -03:00 [DBG] Connection id "0HM4C2T8LGFE0" stopped.
2020-11-18 20:11:45.151 -03:00 [DBG] Connection id "0HM4C2T8LGFE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2020-11-18 20:11:45.188 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:11:45.198 -03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2020-11-18 20:11:45.237 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:11:45.246 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:11:45.250 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:11:45.256 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:11:45.271 -03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2020-11-18 20:11:45.347 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:11:45.353 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:11:45.355 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:11:45.358 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:11:45.361 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:11:45.366 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:11:45.370 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:11:45.392 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:11:45.398 -03:00 [INF] Log GetPrincipal
2020-11-18 20:11:45.426 -03:00 [ERR] Trying again...................................
2020-11-18 20:11:45.450 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:11:45.455 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:11:49.737 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 58
2020-11-18 20:11:49.855 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:11:49.862 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:11:49.863 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:11:49.865 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:11:49.870 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:11:49.874 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:11:49.910 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4536.229ms
2020-11-18 20:11:49.916 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:11:49.921 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:11:49.927 -03:00 [INF] Request finished in 4741.4684ms 500 application/json; charset=utf-8
2020-11-18 20:11:52.068 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:11:52.072 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:11:52.074 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:11:52.077 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:11:52.080 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:11:52.085 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:11:52.089 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:11:52.092 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:11:52.094 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:11:52.101 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:11:52.103 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:11:52.106 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:11:52.110 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:11:52.114 -03:00 [INF] Log GetPrincipal
2020-11-18 20:11:52.116 -03:00 [ERR] Trying again...................................
2020-11-18 20:11:52.119 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:11:52.121 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:11:56.307 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 58
2020-11-18 20:11:56.333 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:11:56.339 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:11:56.343 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:11:56.345 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:11:56.347 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:11:56.350 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:11:56.354 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4247.3705ms
2020-11-18 20:11:56.387 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:11:56.415 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:11:56.420 -03:00 [INF] Request finished in 4351.5885ms 500 application/json; charset=utf-8
2020-11-18 20:11:59.452 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:11:59.471 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:11:59.476 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:11:59.481 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:11:59.485 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:11:59.496 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:11:59.504 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:11:59.506 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:11:59.509 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:11:59.513 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:11:59.516 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:11:59.521 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:11:59.525 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:11:59.528 -03:00 [INF] Log GetPrincipal
2020-11-18 20:11:59.529 -03:00 [ERR] Trying again...................................
2020-11-18 20:11:59.535 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:11:59.537 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:03.711 -03:00 [ERR] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
System.Net.Http.HttpRequestException: Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Polly.Retry.AsyncRetryEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, ExceptionPredicates shouldRetryExceptionPredicates, ResultPredicates`1 shouldRetryResultPredicates, Func`5 onRetryAsync, Int32 permittedRetryCount, IEnumerable`1 sleepDurationsEnumerable, Func`4 sleepDurationProvider, Boolean continueOnCapturedContext)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at Polly.CircuitBreaker.AsyncCircuitBreakerEngine.ImplementationAsync[TResult](Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext, ExceptionPredicates shouldHandleExceptionPredicates, ResultPredicates`1 shouldHandleResultPredicates, ICircuitController`1 breakerController)
   at Polly.AsyncPolicy`1.ExecuteAsync(Func`3 action, Context context, CancellationToken cancellationToken, Boolean continueOnCapturedContext)
   at CircuitBreaker.Principal.Api.HttpFactories.PaymentHttpFactory.MakePayment() in D:\Workspaces\Apps\circuitbreaker\CircuitBreaker\CircuitBreaker.Principal.Api\HttpFactories\PaymentHttpFactory.cs:line 58
2020-11-18 20:12:03.731 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:03.740 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:03.741 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:03.743 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:03.745 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:03.748 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:03.755 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 4233.8606ms
2020-11-18 20:12:03.759 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:03.762 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:03.764 -03:00 [INF] Request finished in 4312.4848ms 500 application/json; charset=utf-8
2020-11-18 20:12:16.176 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:16.183 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:16.186 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:16.193 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:16.197 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:16.202 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:16.220 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:16.224 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:16.229 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:16.237 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:16.240 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:16.244 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:16.248 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:16.254 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:16.256 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:16.260 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:16.262 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:16.568 -03:00 [INF] Received HTTP response after 300.6636ms - "OK"
2020-11-18 20:12:16.572 -03:00 [INF] End processing HTTP request after 312.2815ms - "OK"
2020-11-18 20:12:16.580 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:16.594 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:16.598 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:16.601 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:16.603 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:16.606 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:16.610 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 366.3253ms
2020-11-18 20:12:16.621 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:16.624 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:16.627 -03:00 [INF] Request finished in 451.1414ms 200 application/json; charset=utf-8
2020-11-18 20:12:17.897 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:17.900 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:17.902 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:17.905 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:17.908 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:17.911 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:17.915 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:17.921 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:17.924 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:17.927 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:17.930 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:17.933 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:17.940 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:17.943 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:17.945 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:17.948 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:17.952 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:17.970 -03:00 [INF] Received HTTP response after 18.0631ms - "OK"
2020-11-18 20:12:17.972 -03:00 [INF] End processing HTTP request after 24.3211ms - "OK"
2020-11-18 20:12:17.975 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:17.980 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:17.986 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:17.988 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:17.990 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:17.992 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:17.995 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 62.1293ms
2020-11-18 20:12:18.000 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:18.003 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:18.005 -03:00 [INF] Request finished in 108.303ms 200 application/json; charset=utf-8
2020-11-18 20:12:19.543 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:19.548 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:19.550 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:19.554 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:19.559 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:19.562 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:19.568 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:19.570 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:19.575 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:19.582 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:19.585 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:19.590 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:19.593 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:19.596 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:19.601 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:19.606 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:19.609 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:19.705 -03:00 [INF] Received HTTP response after 95.6653ms - "BadRequest"
2020-11-18 20:12:19.708 -03:00 [INF] End processing HTTP request after 101.7659ms - "BadRequest"
2020-11-18 20:12:21.722 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:21.724 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:21.777 -03:00 [INF] Received HTTP response after 52.1937ms - "BadRequest"
2020-11-18 20:12:21.780 -03:00 [INF] End processing HTTP request after 58.8882ms - "BadRequest"
2020-11-18 20:12:21.784 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:21.789 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:21.791 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:21.793 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:21.795 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:21.798 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:21.805 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2215.1195ms
2020-11-18 20:12:21.807 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:21.810 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:21.813 -03:00 [INF] Request finished in 2269.6203ms 400 application/json; charset=utf-8
2020-11-18 20:12:23.601 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:23.605 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:23.608 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:23.612 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:23.614 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:23.617 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:23.623 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:23.626 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:23.628 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:23.632 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:23.637 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:23.640 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:23.643 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:23.646 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:23.647 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:23.649 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:23.654 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:23.661 -03:00 [INF] Received HTTP response after 6.5888ms - "OK"
2020-11-18 20:12:23.663 -03:00 [INF] End processing HTTP request after 13.4352ms - "OK"
2020-11-18 20:12:23.666 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:23.675 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:23.677 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:23.679 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:23.683 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:23.691 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:23.695 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 55.5687ms
2020-11-18 20:12:23.706 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:23.709 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:23.711 -03:00 [INF] Request finished in 109.8552ms 200 application/json; charset=utf-8
2020-11-18 20:12:24.692 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:24.710 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:24.717 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:24.721 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:24.724 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:24.728 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:24.732 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:24.735 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:24.737 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:24.743 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:24.745 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:24.748 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:24.752 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:24.755 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:24.760 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:24.762 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:24.764 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:24.821 -03:00 [INF] Received HTTP response after 56.8979ms - "BadRequest"
2020-11-18 20:12:24.824 -03:00 [INF] End processing HTTP request after 62.1633ms - "BadRequest"
2020-11-18 20:12:26.834 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:26.837 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:26.893 -03:00 [INF] Received HTTP response after 55.613ms - "BadRequest"
2020-11-18 20:12:26.896 -03:00 [INF] End processing HTTP request after 62.5004ms - "BadRequest"
2020-11-18 20:12:26.900 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:26.905 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:26.907 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:26.909 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:26.913 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:26.916 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:26.920 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2171.2665ms
2020-11-18 20:12:26.922 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:26.925 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:26.930 -03:00 [INF] Request finished in 2238.2396ms 400 application/json; charset=utf-8
2020-11-18 20:12:27.948 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:27.953 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:27.955 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:27.960 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:27.963 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:27.967 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:27.972 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:27.977 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:27.980 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:27.984 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:27.987 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:27.993 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:27.997 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:28.000 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:28.001 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:28.003 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:28.005 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:28.013 -03:00 [INF] Received HTTP response after 7.6734ms - "OK"
2020-11-18 20:12:28.016 -03:00 [INF] End processing HTTP request after 12.2033ms - "OK"
2020-11-18 20:12:28.019 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:28.024 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:28.026 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:28.028 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:28.030 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:28.033 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:28.036 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 43.3977ms
2020-11-18 20:12:28.042 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:28.045 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:28.047 -03:00 [INF] Request finished in 98.8949ms 200 application/json; charset=utf-8
2020-11-18 20:12:28.910 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:28.920 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:28.934 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:28.942 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:28.945 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:28.949 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:28.955 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:28.957 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:28.961 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:28.964 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:28.968 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:28.973 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:28.977 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:28.979 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:28.981 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:28.983 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:28.987 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:29.034 -03:00 [INF] Received HTTP response after 47.1152ms - "BadRequest"
2020-11-18 20:12:29.037 -03:00 [INF] End processing HTTP request after 54.0443ms - "BadRequest"
2020-11-18 20:12:31.053 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:31.057 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:31.113 -03:00 [INF] Received HTTP response after 56.2563ms - "BadRequest"
2020-11-18 20:12:31.117 -03:00 [INF] End processing HTTP request after 63.521ms - "BadRequest"
2020-11-18 20:12:31.120 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:31.124 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:31.126 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:31.128 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:31.130 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:31.136 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:31.140 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2166.7218ms
2020-11-18 20:12:31.142 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:31.145 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:31.147 -03:00 [INF] Request finished in 2237.6305ms 400 application/json; charset=utf-8
2020-11-18 20:12:31.967 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:31.975 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:31.985 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:31.988 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:31.992 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:31.995 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:31.999 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:32.001 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:32.004 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:32.010 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:32.012 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:32.015 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:32.018 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:32.023 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:32.024 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:32.026 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:32.028 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:32.038 -03:00 [INF] Received HTTP response after 7.9492ms - "OK"
2020-11-18 20:12:32.042 -03:00 [INF] End processing HTTP request after 15.7159ms - "OK"
2020-11-18 20:12:32.046 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:32.054 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:32.056 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:32.059 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:32.060 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:32.064 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:32.070 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 55.2478ms
2020-11-18 20:12:32.073 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:32.076 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:32.078 -03:00 [INF] Request finished in 111.0339ms 200 application/json; charset=utf-8
2020-11-18 20:12:32.972 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:32.975 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:32.978 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:32.982 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:32.986 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:32.991 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:32.996 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:32.999 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:33.003 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:33.007 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:33.010 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:33.014 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:33.019 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:33.022 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:33.024 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:33.026 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:33.028 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:33.079 -03:00 [INF] Received HTTP response after 50.8567ms - "BadRequest"
2020-11-18 20:12:33.083 -03:00 [INF] End processing HTTP request after 57.4179ms - "BadRequest"
2020-11-18 20:12:35.102 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:35.109 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:35.166 -03:00 [INF] Received HTTP response after 56.9042ms - "BadRequest"
2020-11-18 20:12:35.170 -03:00 [INF] End processing HTTP request after 67.6796ms - "BadRequest"
2020-11-18 20:12:35.173 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:35.177 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:35.179 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:35.181 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:35.186 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:35.189 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:35.192 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2178.6701ms
2020-11-18 20:12:35.196 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:35.202 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:35.204 -03:00 [INF] Request finished in 2231.694ms 400 application/json; charset=utf-8
2020-11-18 20:12:36.339 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:36.343 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:36.355 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:36.361 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:36.365 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:36.370 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:36.377 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:36.380 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:36.383 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:36.391 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:36.396 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:36.400 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:36.406 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:36.416 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:36.422 -03:00 [ERR] Trying again...................................
2020-11-18 20:12:36.424 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:36.427 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:36.475 -03:00 [INF] Received HTTP response after 48.0534ms - "BadRequest"
2020-11-18 20:12:36.478 -03:00 [INF] End processing HTTP request after 53.7073ms - "BadRequest"
2020-11-18 20:12:38.489 -03:00 [INF] Start processing HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:38.492 -03:00 [INF] Sending HTTP request GET "https://localhost:5003/payment"
2020-11-18 20:12:38.545 -03:00 [INF] Received HTTP response after 52.4682ms - "BadRequest"
2020-11-18 20:12:38.548 -03:00 [INF] End processing HTTP request after 59.4959ms - "BadRequest"
2020-11-18 20:12:38.552 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:38.557 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:38.559 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:38.561 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:38.564 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:38.569 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:38.573 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 2173.3681ms
2020-11-18 20:12:38.577 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:38.580 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:38.583 -03:00 [INF] Request finished in 2244.2632ms 400 application/json; charset=utf-8
2020-11-18 20:12:39.678 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:39.685 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:39.689 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:39.693 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:39.701 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:39.704 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:39.708 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:39.711 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:39.715 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:39.719 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:39.722 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:39.725 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:39.728 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:39.733 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:39.735 -03:00 [WRN] Circuit is Opened
2020-11-18 20:12:39.738 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:39.741 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:39.743 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:39.749 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:39.754 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:39.757 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:39.760 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 35.2114ms
2020-11-18 20:12:39.764 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:39.767 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:39.770 -03:00 [INF] Request finished in 91.0827ms 503 application/json; charset=utf-8
2020-11-18 20:12:41.430 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:41.433 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:41.436 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:41.439 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:41.443 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:41.446 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:41.450 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:41.453 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:41.455 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:41.461 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:41.465 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:41.468 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:41.471 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:41.475 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:41.477 -03:00 [WRN] Circuit is Opened
2020-11-18 20:12:41.479 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:41.483 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:41.484 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:41.486 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:41.488 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:41.493 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:41.496 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 28.1561ms
2020-11-18 20:12:41.501 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:41.506 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:41.509 -03:00 [INF] Request finished in 78.7392ms 503 application/json; charset=utf-8
2020-11-18 20:12:42.119 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:42.129 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:42.133 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:42.136 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:42.144 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:42.149 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:42.156 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:42.164 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:42.167 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:42.174 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:42.177 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:42.180 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:42.184 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:42.188 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:42.191 -03:00 [WRN] Circuit is Opened
2020-11-18 20:12:42.193 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:42.197 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:42.199 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:42.203 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:42.205 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:42.208 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:42.210 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 30.0607ms
2020-11-18 20:12:42.213 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:42.217 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:42.223 -03:00 [INF] Request finished in 103.8627ms 503 application/json; charset=utf-8
2020-11-18 20:12:42.735 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:42.760 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:42.777 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:42.783 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:42.787 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:42.789 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:42.793 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:42.796 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:42.799 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:42.805 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:42.807 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:42.810 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:42.813 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:42.819 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:42.821 -03:00 [WRN] Circuit is Opened
2020-11-18 20:12:42.823 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:42.827 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:42.828 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:42.830 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:42.835 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:42.838 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:42.841 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 30.534ms
2020-11-18 20:12:42.843 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:42.846 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:42.854 -03:00 [INF] Request finished in 119.0834ms 503 application/json; charset=utf-8
2020-11-18 20:12:43.339 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/principal  
2020-11-18 20:12:43.344 -03:00 [DBG] 1 candidate(s) found for the request path '/principal'
2020-11-18 20:12:43.346 -03:00 [DBG] Endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)' with route pattern 'Principal' is valid for the request path '/principal'
2020-11-18 20:12:43.351 -03:00 [DBG] Request matched endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:43.356 -03:00 [INF] Executing endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:43.360 -03:00 [INF] Route matched with {action = "GetPrincipal", controller = "Principal"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPrincipal() on controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api).
2020-11-18 20:12:43.366 -03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2020-11-18 20:12:43.371 -03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2020-11-18 20:12:43.375 -03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2020-11-18 20:12:43.379 -03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2020-11-18 20:12:43.382 -03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2020-11-18 20:12:43.386 -03:00 [DBG] Executing controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:43.390 -03:00 [DBG] Executed controller factory for controller CircuitBreaker.Principal.Api.Controllers.PrincipalController (CircuitBreaker.Principal.Api)
2020-11-18 20:12:43.393 -03:00 [INF] Log GetPrincipal
2020-11-18 20:12:43.395 -03:00 [WRN] Circuit is Opened
2020-11-18 20:12:43.397 -03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2020-11-18 20:12:43.406 -03:00 [DBG] No information found on request to perform content negotiation.
2020-11-18 20:12:43.408 -03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2020-11-18 20:12:43.410 -03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2020-11-18 20:12:43.412 -03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2020-11-18 20:12:43.417 -03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2020-11-18 20:12:43.420 -03:00 [INF] Executed action CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api) in 34.2756ms
2020-11-18 20:12:43.423 -03:00 [INF] Executed endpoint 'CircuitBreaker.Principal.Api.Controllers.PrincipalController.GetPrincipal (CircuitBreaker.Principal.Api)'
2020-11-18 20:12:43.426 -03:00 [DBG] Connection id "0HM4C2T8LGFE1" completed keep alive response.
2020-11-18 20:12:43.428 -03:00 [INF] Request finished in 88.4575ms 503 application/json; charset=utf-8
2020-11-18 20:13:45.398 -03:00 [DBG] HttpMessageHandler expired after 120000ms for client 'PaymentApi'
2020-11-18 20:13:55.429 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 20:13:55.443 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0245ms - processed: 0 items - remaining: 1 items
2020-11-18 20:14:05.450 -03:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2020-11-18 20:14:05.454 -03:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0078ms - processed: 0 items - remaining: 1 items
